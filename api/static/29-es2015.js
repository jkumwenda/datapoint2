(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"2OEh":function(e,t,r){"use strict";r.r(t),r.d(t,"TravelModule",(function(){return L}));var o=r("ofXK"),i=r("tyNb"),c=r("mrSG"),b=r("NiRy"),n=r("Jdlf"),a=r("fXoL"),l=r("Mtp9"),s=r("7o2P");let d=(()=>{class e{constructor(e){this.commonService=e,this.endpoint="travels/"}addTravel(e){return new Promise((t,r)=>{this.commonService.post(this.endpoint,e).then(e=>{t(e)},e=>{r(e)})})}getTravel(e){return new Promise((t,r)=>{this.commonService.get(this.endpoint+e+"/").then(e=>{t(e)},e=>{r(e)})})}getTravels(){return new Promise((e,t)=>{this.commonService.get(this.endpoint).then(t=>{e(t)},e=>{t(e)})})}editTravel(e,t){return new Promise((r,o)=>{this.commonService.update(this.endpoint+e+"/",t).then(e=>{r(e)},e=>{o(!1)})})}deleteTravel(e){return new Promise((t,r)=>{this.commonService.delete(this.endpoint+e+"/").then(e=>{t(!0)},e=>{r(!1)})})}}return e.\u0275fac=function(t){return new(t||e)(a.Zb(s.a))},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=r("4PCd"),u=r("njyG");const p=function(){return["/add-travel"]};function v(e,t){1&e&&(a.Rb(0,"button",7),a.Hc(1," Travel Request "),a.Qb()),2&e&&a.mc("routerLink",a.pc(1,p))}function h(e,t){if(1&e){const e=a.Sb();a.Rb(0,"span",15),a.cc("click",(function(){a.wc(e);const t=a.gc().$implicit;return a.gc(2).view(t.pk_travelid)})),a.Nb(1,"i",16),a.Qb()}}const R=function(e){return["/edit-travel",e]};function f(e,t){if(1&e&&(a.Rb(0,"span",17),a.Nb(1,"i",18),a.Qb()),2&e){const e=a.gc().$implicit;a.mc("routerLink",a.qc(1,R,e.pk_travelid))}}function Q(e,t){if(1&e){const e=a.Sb();a.Rb(0,"span",19),a.cc("click",(function(){a.wc(e);const t=a.gc().$implicit;return a.gc(2).delete(t.pk_travelid)})),a.Nb(1,"i",20),a.Qb()}}function y(e,t){if(1&e&&(a.Rb(0,"tr"),a.Rb(1,"td"),a.Hc(2),a.Qb(),a.Rb(3,"td"),a.Hc(4),a.Qb(),a.Rb(5,"td"),a.Hc(6),a.Qb(),a.Rb(7,"td"),a.Hc(8),a.Qb(),a.Rb(9,"td"),a.Hc(10),a.Qb(),a.Rb(11,"td"),a.Hc(12),a.Qb(),a.Rb(13,"td"),a.Hc(14),a.Qb(),a.Rb(15,"td"),a.Hc(16),a.Qb(),a.Rb(17,"td"),a.Hc(18),a.Qb(),a.Rb(19,"td",11),a.Fc(20,h,2,0,"span",12),a.Fc(21,f,2,3,"span",13),a.Fc(22,Q,2,0,"span",14),a.Qb(),a.Qb()),2&e){const e=t.$implicit,r=a.gc(2);a.zb(2),a.Jc(" TML/TA ",e.pk_travelid," "),a.zb(2),a.Jc(" ",e.period_from," "),a.zb(2),a.Jc(" ",e.period_to," "),a.zb(2),a.Ic(e.route),a.zb(2),a.Ic(e.destination),a.zb(2),a.Ic(e.purpose),a.zb(2),a.Ic(e.fuel_requirement),a.zb(2),a.Ic(e.allowance),a.zb(2),a.Ic(e.accomodation),a.zb(2),a.mc("ngIf",r.checkButton("view-travel")),a.zb(1),a.mc("ngIf",r.checkButton("edit-travel")),a.zb(1),a.mc("ngIf",r.checkButton("delete-travel"))}}function g(e,t){if(1&e&&(a.Rb(0,"table",8),a.Rb(1,"thead"),a.Rb(2,"tr"),a.Rb(3,"th"),a.Hc(4,"Ref ID"),a.Qb(),a.Rb(5,"th"),a.Hc(6,"From"),a.Qb(),a.Rb(7,"th"),a.Hc(8,"To"),a.Qb(),a.Rb(9,"th"),a.Hc(10,"Route"),a.Qb(),a.Rb(11,"th"),a.Hc(12,"destination"),a.Qb(),a.Rb(13,"th"),a.Hc(14,"purpose"),a.Qb(),a.Rb(15,"th"),a.Hc(16,"Fuel Requirement"),a.Qb(),a.Rb(17,"th"),a.Hc(18,"allowance"),a.Qb(),a.Rb(19,"th"),a.Hc(20,"accommodation"),a.Qb(),a.Rb(21,"th",9),a.Hc(22,"Options"),a.Qb(),a.Qb(),a.Qb(),a.Rb(23,"tbody"),a.Fc(24,y,23,12,"tr",10),a.Qb(),a.Qb()),2&e){const e=a.gc();a.mc("dtOptions",e.dtOptions),a.zb(24),a.mc("ngForOf",e.travels)}}let w=(()=>{class e{constructor(e,t,r,o){this.sidebarService=e,this.travelServices=t,this.router=r,this.rolePermissionsState=o,this.dtOptions=n.a}getTravels(){return Object(c.a)(this,void 0,void 0,(function*(){try{this.travels=yield this.travelServices.getTravels()}catch(e){}}))}view(e){this.router.navigate(["/travel",e])}delete(e){}edit(e){}checkButton(e){return Object(b.a)(this.rolePermissionsState,e)}ngOnInit(){this.sidebarService.setTitle("myRequests"),this.getTravels()}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(l.a),a.Mb(d),a.Mb(i.b),a.Mb(m.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-travels"]],decls:9,vars:2,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[1,"text-left"],["class","btn btn-primary btn-sm mdi mdi-plus-circle",3,"routerLink",4,"ngIf"],[1,"table-responsive"],["class","table table-striped table-bordered","datatable","",3,"dtOptions",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mdi","mdi-plus-circle",3,"routerLink"],["datatable","",1,"table","table-striped","table-bordered",3,"dtOptions"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["class","control text-secondary","title","View Item",3,"click",4,"ngIf"],["class","control text-secondary","title","Edit Item",3,"routerLink",4,"ngIf"],["class","control text-secondary","title","Delete Item",3,"click",4,"ngIf"],["title","View Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-eye","option-icon"],["title","Edit Item",1,"control","text-secondary",3,"routerLink"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"strong"),a.Hc(3,"Travel and Accomodation "),a.Qb(),a.Qb(),a.Rb(4,"div",2),a.Rb(5,"p",3),a.Fc(6,v,2,2,"button",4),a.Qb(),a.Rb(7,"div",5),a.Fc(8,g,25,2,"table",6),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(6),a.mc("ngIf",t.checkButton("add-afp")),a.zb(2),a.mc("ngIf",t.travels))},directives:[o.l,i.c,u.a,o.k],styles:[""]}),e})();var H=r("3Pt+"),I=r("YqHM"),q=r("T2nI"),k=r("SYt/");let S=(()=>{class e{constructor(e,t,r,o,i){this.router=e,this.travelService=t,this.formBuilder=r,this.processService=o,this.sidebarService=i}submit(){return Object(c.a)(this,void 0,void 0,(function*(){const e=Object.assign({fk_processid:this.processId},this.travelForm.value);try{const t=yield this.travelService.addTravel(e);this.router.navigate(["travel",t.pk_travelid])}catch(t){}}))}initForm(){this.travelForm=this.formBuilder.group({route:["",H.r.compose([H.r.required])],destination:["",H.r.compose([H.r.required])],period_from:["",H.r.compose([H.r.required])],period_to:["",H.r.compose([H.r.required])],fuel_requirement:["",H.r.compose([H.r.required])],allowance:["",H.r.compose([H.r.required])],purpose:["",H.r.compose([H.r.required])],accomodation:["",H.r.compose([H.r.required])]})}ngOnInit(){Object(I.a)(q.a.AddTravel,this.processService).then(e=>this.processId=e),this.initForm(),this.sidebarService.setTitle("myRequests")}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(i.b),a.Mb(d),a.Mb(H.b),a.Mb(k.a),a.Mb(l.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-add-travel"]],decls:52,vars:3,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-lg-5","col-md-5"],["for","amountInput"],["type","date","formControlName","period_from","placeholder","Period From",1,"form-control"],["type","date","formControlName","period_to","placeholder","Period To",1,"form-control"],[1,"col-10"],["for","paymentFor"],["id","paymentFor","placeholder","Physical address . . . ","rows","3","formControlName","purpose",1,"form-control"],[1,"col-5"],["type","number","formControlName","allowance","placeholder","allowance",1,"form-control"],["type","text","formControlName","accomodation","placeholder","Accomodation",1,"form-control"],["type","text","formControlName","destination","placeholder","Destination",1,"form-control"],["type","text","formControlName","route","placeholder","Route",1,"form-control"],["type","text","formControlName","fuel_requirement","placeholder","fuel requirement",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"btn",3,"routerLink"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"strong"),a.Hc(3,"Vendor Creation Details"),a.Qb(),a.Qb(),a.Rb(4,"div",2),a.Rb(5,"form",3),a.cc("ngSubmit",(function(){return t.submit()})),a.Rb(6,"div",4),a.Rb(7,"div",5),a.Rb(8,"div",6),a.Rb(9,"label",7),a.Hc(10,"From"),a.Qb(),a.Nb(11,"input",8),a.Qb(),a.Rb(12,"div",6),a.Rb(13,"label",7),a.Hc(14,"To"),a.Qb(),a.Nb(15,"input",9),a.Qb(),a.Qb(),a.Qb(),a.Rb(16,"div",4),a.Rb(17,"div",5),a.Rb(18,"div",10),a.Rb(19,"label",11),a.Hc(20,"Purpose"),a.Qb(),a.Nb(21,"textarea",12),a.Qb(),a.Qb(),a.Qb(),a.Rb(22,"div",4),a.Rb(23,"div",5),a.Rb(24,"div",13),a.Rb(25,"label",7),a.Hc(26,"Allowance"),a.Qb(),a.Nb(27,"input",14),a.Qb(),a.Rb(28,"div",13),a.Rb(29,"label",7),a.Hc(30,"accomodation"),a.Qb(),a.Nb(31,"input",15),a.Qb(),a.Qb(),a.Qb(),a.Rb(32,"div",4),a.Rb(33,"div",5),a.Rb(34,"div",13),a.Rb(35,"label",7),a.Hc(36,"Destination"),a.Qb(),a.Nb(37,"input",16),a.Qb(),a.Rb(38,"div",13),a.Rb(39,"label",7),a.Hc(40,"Route"),a.Qb(),a.Nb(41,"input",17),a.Qb(),a.Qb(),a.Qb(),a.Rb(42,"div",4),a.Rb(43,"div",5),a.Rb(44,"div",10),a.Rb(45,"label",7),a.Hc(46,"Fuel Requirement"),a.Qb(),a.Nb(47,"input",18),a.Qb(),a.Qb(),a.Qb(),a.Rb(48,"button",19),a.Hc(49," Submit "),a.Qb(),a.Rb(50,"button",20),a.Hc(51,"Cancel"),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(5),a.mc("formGroup",t.travelForm),a.zb(43),a.mc("disabled",!t.travelForm.valid),a.zb(2),a.mc("routerLink","/travels"))},directives:[H.t,H.k,H.e,H.a,H.j,H.d,H.m,i.c],styles:[""]}),e})();var N=r("m4K9"),F=r.n(N),T=r("DaQG"),_=r.n(T),z=r("a9NN"),C=r("hE/2");function M(e,t){if(1&e&&(a.Rb(0,"table",2),a.Rb(1,"tbody"),a.Rb(2,"tr"),a.Rb(3,"th",3),a.Hc(4,"Requested by :"),a.Qb(),a.Rb(5,"td"),a.Hc(6),a.Qb(),a.Qb(),a.Rb(7,"tr"),a.Rb(8,"th",3),a.Hc(9,"From :"),a.Qb(),a.Rb(10,"td"),a.Hc(11),a.Qb(),a.Qb(),a.Rb(12,"tr"),a.Rb(13,"th",3),a.Hc(14,"To :"),a.Qb(),a.Rb(15,"td"),a.Hc(16),a.Qb(),a.Qb(),a.Rb(17,"tr"),a.Rb(18,"th",3),a.Hc(19,"Purpose :"),a.Qb(),a.Rb(20,"td"),a.Hc(21),a.Qb(),a.Qb(),a.Rb(22,"tr"),a.Rb(23,"th",3),a.Hc(24,"Allowance :"),a.Qb(),a.Rb(25,"td"),a.Hc(26),a.Qb(),a.Qb(),a.Rb(27,"tr"),a.Rb(28,"th",3),a.Hc(29,"destination :"),a.Qb(),a.Rb(30,"td"),a.Hc(31),a.Qb(),a.Qb(),a.Rb(32,"tr"),a.Rb(33,"th",3),a.Hc(34,"Route :"),a.Qb(),a.Rb(35,"td"),a.Hc(36),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e){const e=a.gc();a.zb(6),a.Jc(" ",e.request&&e.request.profile.user.first_name+" "+e.request.profile.user.last_name," "),a.zb(5),a.Ic(e.travel.period_from),a.zb(5),a.Ic(e.travel.period_to),a.zb(5),a.Ic(e.travel.purpose),a.zb(5),a.Ic(e.travel.allowance),a.zb(5),a.Ic(e.travel.destination),a.zb(5),a.Ic(e.travel.route)}}let O=(()=>{class e{constructor(e,t,r,o){this.travelService=e,this.activatedRouter=t,this.sidebarService=r,this.requestService=o,this.downloadPDF=()=>{const e=new F.a("p","pt");e.text("Travel Details",35,20),_()(e,{html:"#table"}),e.save(`travel-details-${Date.now()}.pdf`)},this.travelId=this.activatedRouter.snapshot.params.id}getRequest(){return Object(c.a)(this,void 0,void 0,(function*(){try{const e=yield this.requestService.getRequests("requests",`fk_processid=${this.travel.fk_processid}&workflowid=${this.travelId}`);this.request=e[0]}catch(e){}}))}getTravel(){return Object(c.a)(this,void 0,void 0,(function*(){this.travel=yield this.travelService.getTravel(this.travelId),this.getRequest()}))}ngOnInit(){this.getTravel(),this.sidebarService.setTitle("myRequests")}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(d),a.Mb(i.a),a.Mb(l.a),a.Mb(z.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-travel"]],decls:2,vars:4,consts:[["title","Travel Details",3,"downloadButtonClicked","processId","workflowid"],["class","table table-borderless table-responsive","id","table",4,"ngIf"],["id","table",1,"table","table-borderless","table-responsive"],["scope","row"]],template:function(e,t){1&e&&(a.Rb(0,"app-view-card",0),a.Fc(1,M,37,7,"table",1),a.Qb()),2&e&&(a.mc("downloadButtonClicked",t.downloadPDF)("processId",t.travel&&t.travel.fk_processid)("workflowid",t.travelId),a.zb(1),a.mc("ngIf",t.travel))},directives:[C.a,o.l],styles:[""]}),e})(),P=(()=>{class e{constructor(e,t,r,o,i,c){this.router=e,this.travelService=t,this.formBuilder=r,this.processService=o,this.sidebarService=i,this.activatedRoute=c,this.travelId=this.activatedRoute.snapshot.params.id}submit(){return Object(c.a)(this,void 0,void 0,(function*(){const e=Object.assign({fk_processid:this.processId},this.travelForm.value);try{yield this.travelService.editTravel(this.travelId,e),this.router.navigate(["travels"])}catch(t){}}))}getTravel(){this.travelService.getTravel(this.travelId).then(e=>{this.initForm(e)})}initForm(e={}){this.travelForm=this.formBuilder.group({route:[e.route,H.r.compose([H.r.required])],destination:[e.destination,H.r.compose([H.r.required])],period_from:[e.period_from,H.r.compose([H.r.required])],period_to:[e.period_to,H.r.compose([H.r.required])],fuel_requirement:[e.fuel_requirement,H.r.compose([H.r.required])],allowance:[e.allowance,H.r.compose([H.r.required])],purpose:[e.purpose,H.r.compose([H.r.required])],accomodation:[e.accomodation,H.r.compose([H.r.required])]})}ngOnInit(){Object(I.a)(q.a.AddTravel,this.processService).then(e=>this.processId=e),this.initForm(),this.getTravel(),this.sidebarService.setTitle("myRequests")}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(i.b),a.Mb(d),a.Mb(H.b),a.Mb(k.a),a.Mb(l.a),a.Mb(i.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-edit-travel"]],decls:52,vars:3,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-5"],["for","amountInput"],["type","date","formControlName","period_from","placeholder","Period From",1,"form-control"],["type","date","formControlName","period_to","placeholder","Period To",1,"form-control"],[1,"col-10"],["for","paymentFor"],["id","paymentFor","placeholder","Physical address . . . ","rows","3","formControlName","purpose",1,"form-control"],["type","number","formControlName","allowance","placeholder","allowance",1,"form-control"],["type","text","formControlName","accomodation","placeholder","Accomodation",1,"form-control"],["type","text","formControlName","destination","placeholder","Destination",1,"form-control"],["type","text","formControlName","route","placeholder","Route",1,"form-control"],["type","text","formControlName","fuel_requirement","placeholder","fuel requirement",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"btn",3,"routerLink"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"strong"),a.Hc(3,"Vendor Creation Details"),a.Qb(),a.Qb(),a.Rb(4,"div",2),a.Rb(5,"form",3),a.cc("ngSubmit",(function(){return t.submit()})),a.Rb(6,"div",4),a.Rb(7,"div",5),a.Rb(8,"div",6),a.Rb(9,"label",7),a.Hc(10,"From"),a.Qb(),a.Nb(11,"input",8),a.Qb(),a.Rb(12,"div",6),a.Rb(13,"label",7),a.Hc(14,"To"),a.Qb(),a.Nb(15,"input",9),a.Qb(),a.Qb(),a.Qb(),a.Rb(16,"div",4),a.Rb(17,"div",5),a.Rb(18,"div",10),a.Rb(19,"label",11),a.Hc(20,"Purpose"),a.Qb(),a.Nb(21,"textarea",12),a.Qb(),a.Qb(),a.Qb(),a.Rb(22,"div",4),a.Rb(23,"div",5),a.Rb(24,"div",6),a.Rb(25,"label",7),a.Hc(26,"Allowance"),a.Qb(),a.Nb(27,"input",13),a.Qb(),a.Rb(28,"div",6),a.Rb(29,"label",7),a.Hc(30,"accomodation"),a.Qb(),a.Nb(31,"input",14),a.Qb(),a.Qb(),a.Qb(),a.Rb(32,"div",4),a.Rb(33,"div",5),a.Rb(34,"div",6),a.Rb(35,"label",7),a.Hc(36,"Destination"),a.Qb(),a.Nb(37,"input",15),a.Qb(),a.Rb(38,"div",6),a.Rb(39,"label",7),a.Hc(40,"Route"),a.Qb(),a.Nb(41,"input",16),a.Qb(),a.Qb(),a.Qb(),a.Rb(42,"div",4),a.Rb(43,"div",5),a.Rb(44,"div",10),a.Rb(45,"label",7),a.Hc(46,"Fuel Requirement"),a.Qb(),a.Nb(47,"input",17),a.Qb(),a.Qb(),a.Qb(),a.Rb(48,"button",18),a.Hc(49," Update "),a.Qb(),a.Rb(50,"button",19),a.Hc(51,"Cancel"),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(5),a.mc("formGroup",t.travelForm),a.zb(43),a.mc("disabled",!t.travelForm.valid),a.zb(2),a.mc("routerLink","/travels"))},directives:[H.t,H.k,H.e,H.a,H.j,H.d,H.m,i.c],styles:[""]}),e})();const x=[{path:"",component:r("jljr").a,children:[{path:"travels",component:w},{path:"travel:id",component:O},{path:"add-travel",component:S},{path:"edit-travel/:id",component:P},{path:"travel/:id",component:O}]}];let j=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(x)],i.f]}),e})();var D=r("WM+C");let L=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[o.b,j,H.o,D.a,u.b]]}),e})()}}]);