(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"2AdV":function(t,e,o){"use strict";o.r(e),o.d(e,"WorkflowChangeModule",(function(){return G}));var r=o("3Pt+"),i=o("ofXK"),c=o("tyNb"),n=o("mrSG"),s=o("NiRy"),a=o("Jdlf"),d=o("fXoL"),b=o("7o2P");let l=(()=>{class t{constructor(t){this.commonService=t,this.endpoint="workflow_rights/"}addWorkflowRights(t){return new Promise((e,o)=>{this.commonService.post(this.endpoint,t).then(t=>{e(t)},t=>{o(t)})})}getWorkflowRights(){return new Promise((t,e)=>{this.commonService.get(this.endpoint).then(e=>{t(e)},t=>{e(t)})})}getWorkflowRight(t){return new Promise((e,o)=>{this.commonService.get(this.endpoint+t+"/").then(t=>{e(t)},t=>{o(t)})})}editWorkflowRights(t,e){return new Promise((o,r)=>{this.commonService.update(this.endpoint+t+"/",e).then(t=>{o(t)},t=>{r(!1)})})}deleteWorkflowRights(t){return new Promise((e,o)=>{this.commonService.delete(this.endpoint+t+"/").then(t=>{e(!0)},t=>{o(!1)})})}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(b.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=o("4PCd"),f=o("Mtp9"),w=o("njyG");const m=function(){return["/add-workflow-change"]};function p(t,e){1&t&&(d.Rb(0,"button",6),d.Hc(1," Workflow Change "),d.Qb()),2&t&&d.mc("routerLink",d.pc(1,m))}function u(t,e){if(1&t){const t=d.Sb();d.Rb(0,"span",14),d.cc("click",(function(){d.wc(t);const e=d.gc().$implicit;return d.gc(2).view(e.pk_workflow_rightid)})),d.Nb(1,"i",15),d.Qb()}}const g=function(t){return["/edit-workflow-change",t]};function k(t,e){if(1&t&&(d.Rb(0,"span",16),d.Nb(1,"i",17),d.Qb()),2&t){const t=d.gc().$implicit;d.mc("routerLink",d.qc(1,g,t.pk_workflow_rightid))}}function R(t,e){if(1&t){const t=d.Sb();d.Rb(0,"span",18),d.cc("click",(function(){d.wc(t);const e=d.gc().$implicit;return d.gc(2).delete(e.pk_workflow_rightid)})),d.Nb(1,"i",19),d.Qb()}}function v(t,e){if(1&t&&(d.Rb(0,"tr"),d.Rb(1,"td"),d.Hc(2),d.Qb(),d.Rb(3,"td"),d.Hc(4),d.Qb(),d.Rb(5,"td"),d.Hc(6),d.Qb(),d.Rb(7,"td"),d.Hc(8),d.Qb(),d.Rb(9,"td",10),d.Fc(10,u,2,0,"span",11),d.Fc(11,k,2,3,"span",12),d.Fc(12,R,2,0,"span",13),d.Qb(),d.Qb()),2&t){const t=e.$implicit,o=d.gc(2);d.zb(2),d.Jc("TML/WC ",t.pk_workflow_rightid,""),d.zb(2),d.Ic(t.date_from),d.zb(2),d.Ic(t.date_to),d.zb(2),d.Ic(t.description),d.zb(2),d.mc("ngIf",o.checkButton("view-workflow-changes")),d.zb(1),d.mc("ngIf",o.checkButton("edit-workflow-change")),d.zb(1),d.mc("ngIf",o.checkButton("delete-workflow-change"))}}function Q(t,e){if(1&t&&(d.Rb(0,"table",7),d.Rb(1,"thead"),d.Rb(2,"tr"),d.Rb(3,"th"),d.Hc(4,"Ref ID"),d.Qb(),d.Rb(5,"th"),d.Hc(6,"From"),d.Qb(),d.Rb(7,"th"),d.Hc(8,"To"),d.Qb(),d.Rb(9,"th"),d.Hc(10,"Description"),d.Qb(),d.Rb(11,"th",8),d.Hc(12,"Options"),d.Qb(),d.Qb(),d.Qb(),d.Rb(13,"tbody"),d.Fc(14,v,13,7,"tr",9),d.Qb(),d.Qb()),2&t){const t=d.gc();d.mc("dtOptions",t.dtOptions),d.zb(14),d.mc("ngForOf",t.workFlowRights)}}let y=(()=>{class t{constructor(t,e,o,r){this.workflowRightsService=t,this.router=e,this.rolePermissionsState=o,this.sidebarService=r,this.dtOptions=a.a}getWorkFlow(){return Object(n.a)(this,void 0,void 0,(function*(){try{this.workFlowRights=yield this.workflowRightsService.getWorkflowRights(),console.log(this.workFlowRights)}catch(t){}}))}checkButton(t){return Object(s.a)(this.rolePermissionsState,t)}view(t){this.router.navigate(["workflow-change",t])}edit(t){}delete(t){}ngOnInit(){this.getWorkFlow(),this.sidebarService.setTitle("myRequests")}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l),d.Mb(c.b),d.Mb(h.a),d.Mb(f.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-workflow-changes"]],decls:8,vars:2,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[1,"text-left"],["class","btn btn-primary btn-sm mdi mdi-plus-circle",3,"routerLink",4,"ngIf"],["datatable","","class","table table-striped table-bordered",3,"dtOptions",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mdi","mdi-plus-circle",3,"routerLink"],["datatable","",1,"table","table-striped","table-bordered",3,"dtOptions"],["width","80",1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["class","control text-secondary","title","View Item",3,"click",4,"ngIf"],["class","control text-secondary","title","Edit Item",3,"routerLink",4,"ngIf"],["class","control text-secondary","title","Delete Item",3,"click",4,"ngIf"],["title","View Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-eye","option-icon"],["title","Edit Item",1,"control","text-secondary",3,"routerLink"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(t,e){1&t&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Rb(2,"strong"),d.Hc(3,"Workflow Change"),d.Qb(),d.Qb(),d.Rb(4,"div",2),d.Rb(5,"p",3),d.Fc(6,p,2,2,"button",4),d.Qb(),d.Fc(7,Q,15,2,"table",5),d.Qb(),d.Qb()),2&t&&(d.zb(6),d.mc("ngIf",e.checkButton("add-role")),d.zb(1),d.mc("ngIf",e.workFlowRights))},directives:[i.l,c.c,w.a,i.k],styles:[""]}),t})();var F=o("YqHM"),I=o("T2nI"),S=o("SYt/");let _=(()=>{class t{constructor(t,e,o,r,i){this.workflowService=t,this.formBuilder=e,this.router=o,this.processService=r,this.sidebarService=i}submit(){return Object(n.a)(this,void 0,void 0,(function*(){const t=Object.assign({fk_processid:this.processId},this.addWorkFlowForm.value);try{const e=yield this.workflowService.addWorkflowRights(t);this.router.navigate(["workflow-changes",e.pk_workflow_rightid])}catch(e){}}))}initForm(){this.addWorkFlowForm=this.formBuilder.group({description:["",r.r.compose([r.r.required])],date_from:["",r.r.compose([r.r.required])],date_to:["",r.r.compose([r.r.required])]})}ngOnInit(){Object(F.a)(I.a.AddWorkFlowChange,this.processService).then(t=>this.processId=t),this.initForm(),this.sidebarService.setTitle("myRequests")}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l),d.Mb(r.b),d.Mb(c.b),d.Mb(S.a),d.Mb(f.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-add-workflow-change"]],decls:26,vars:3,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-Firstname"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-10"],["for","description"],["type","textarea","id","description","placeholder","Description. ","rows","4","formControlName","description",1,"form-control"],[1,"col-5"],["for","from_date"],["type","date","id","from_date","formControlName","date_from","placeholder","Date from",1,"form-control"],["for","to_date"],["type","date","id","to_date","formControlName","date_to","placeholder","Date to",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit",1,"btn",3,"routerLink"]],template:function(t,e){1&t&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Rb(2,"strong"),d.Hc(3,"Workflow Change Details"),d.Qb(),d.Qb(),d.Rb(4,"div",2),d.Rb(5,"form",3),d.cc("ngSubmit",(function(){return e.submit()})),d.Rb(6,"div",4),d.Rb(7,"div",5),d.Rb(8,"div",6),d.Rb(9,"label",7),d.Hc(10,"Description"),d.Qb(),d.Nb(11,"textarea",8),d.Qb(),d.Qb(),d.Qb(),d.Rb(12,"div",4),d.Rb(13,"div",5),d.Rb(14,"div",9),d.Rb(15,"label",10),d.Hc(16,"From date"),d.Qb(),d.Nb(17,"input",11),d.Qb(),d.Rb(18,"div",9),d.Rb(19,"label",12),d.Hc(20,"To date"),d.Qb(),d.Nb(21,"input",13),d.Qb(),d.Qb(),d.Qb(),d.Rb(22,"button",14),d.Hc(23," Submit "),d.Qb(),d.Rb(24,"button",15),d.Hc(25,"Cancel"),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t&&(d.zb(5),d.mc("formGroup",e.addWorkFlowForm),d.zb(17),d.mc("disabled",!e.addWorkFlowForm.valid),d.zb(2),d.mc("routerLink","/workflow-changes"))},directives:[r.t,r.k,r.e,r.a,r.j,r.d,c.c],styles:[""]}),t})();var W=o("m4K9"),C=o.n(W),H=o("DaQG"),M=o.n(H),q=o("a9NN"),O=o("hE/2");function z(t,e){if(1&t&&(d.Rb(0,"table",2),d.Rb(1,"tbody"),d.Rb(2,"tr"),d.Rb(3,"th",3),d.Hc(4,"Requested by :"),d.Qb(),d.Rb(5,"td"),d.Hc(6),d.Qb(),d.Qb(),d.Rb(7,"tr"),d.Rb(8,"th",3),d.Hc(9,"From :"),d.Qb(),d.Rb(10,"td"),d.Hc(11),d.Qb(),d.Qb(),d.Rb(12,"tr"),d.Rb(13,"th",3),d.Hc(14,"To :"),d.Qb(),d.Rb(15,"td"),d.Hc(16),d.Qb(),d.Qb(),d.Rb(17,"tr"),d.Rb(18,"th",3),d.Hc(19,"Description :"),d.Qb(),d.Rb(20,"td"),d.Hc(21),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t){const t=d.gc();d.zb(6),d.Jc(" ",t.request&&t.request.profile.user.first_name+" "+t.request.profile.user.last_name," "),d.zb(5),d.Ic(t.workflowChange.date_from),d.zb(5),d.Ic(t.workflowChange.date_to),d.zb(5),d.Ic(t.workflowChange.description)}}let D=(()=>{class t{constructor(t,e,o,r){this.activatedRoute=t,this.workflowRightsService=e,this.sidebarService=o,this.requestService=r,this.downloadPDF=()=>{const t=new C.a("p","pt");t.text("workflow Change Details",35,20),M()(t,{html:"#table"}),t.save(`workflowchange-${Date.now()}.pdf`)},this.workflowId=this.activatedRoute.snapshot.params.id}getRequest(){return Object(n.a)(this,void 0,void 0,(function*(){try{const t=yield this.requestService.getRequests("requests",`fk_processid=${this.workflowChange.fk_processid}&workflowid=${this.workflowId}`);this.request=t[0]}catch(t){}}))}getWorkRightChange(){return Object(n.a)(this,void 0,void 0,(function*(){try{this.workflowChange=yield this.workflowRightsService.getWorkflowRight(this.workflowId),this.getRequest()}catch(t){}}))}ngOnInit(){this.getWorkRightChange(),this.sidebarService.setTitle("myRequests")}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(c.a),d.Mb(l),d.Mb(f.a),d.Mb(q.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-workflow-change"]],decls:2,vars:4,consts:[["title","Workflow Change",3,"processId","workflowid","downloadButtonClicked"],["class","table table-borderless table-responsive",4,"ngIf"],[1,"table","table-borderless","table-responsive"],["scope","row"]],template:function(t,e){1&t&&(d.Rb(0,"app-view-card",0),d.Fc(1,z,22,4,"table",1),d.Qb()),2&t&&(d.mc("processId",e.workflowChange&&e.workflowChange.fk_processid)("workflowid",e.workflowId)("downloadButtonClicked",e.downloadPDF),d.zb(1),d.mc("ngIf",e.workflowChange))},directives:[O.a,i.l],styles:[""]}),t})(),N=(()=>{class t{constructor(t,e,o,r,i,c){this.workflowService=t,this.formBuilder=e,this.router=o,this.processService=r,this.sidebarService=i,this.activatedRoute=c,this.workflowId=this.activatedRoute.snapshot.params.id}submit(){return Object(n.a)(this,void 0,void 0,(function*(){const t=Object.assign({fk_processid:this.processId},this.addWorkFlowForm.value);try{yield this.workflowService.editWorkflowRights(this.workflowId,t),this.router.navigate(["workflow-changes"])}catch(e){}}))}getWorkFlowRights(){this.workflowService.getWorkflowRight(this.workflowId).then(t=>{this.initForm(t)})}initForm(t={}){this.addWorkFlowForm=this.formBuilder.group({description:[t.description,r.r.compose([r.r.required])],date_from:[t.date_from,r.r.compose([r.r.required])],date_to:[t.date_to,r.r.compose([r.r.required])]})}ngOnInit(){Object(F.a)(I.a.AddWorkFlowChange,this.processService).then(t=>this.processId=t),this.initForm(),this.getWorkFlowRights(),this.sidebarService.setTitle("myRequests")}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l),d.Mb(r.b),d.Mb(c.b),d.Mb(S.a),d.Mb(f.a),d.Mb(c.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-edit-workflow-change"]],decls:26,vars:3,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-Firstname"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-10"],["for","description"],["type","textarea","id","description","placeholder","Description. ","rows","4","formControlName","description",1,"form-control"],[1,"col-5"],["for","from_date"],["type","date","id","from_date","formControlName","date_from","placeholder","Date from",1,"form-control"],["for","to_date"],["type","date","id","to_date","formControlName","date_to","placeholder","Date to",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit",1,"btn",3,"routerLink"]],template:function(t,e){1&t&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Rb(2,"strong"),d.Hc(3,"Workflow Change Details"),d.Qb(),d.Qb(),d.Rb(4,"div",2),d.Rb(5,"form",3),d.cc("ngSubmit",(function(){return e.submit()})),d.Rb(6,"div",4),d.Rb(7,"div",5),d.Rb(8,"div",6),d.Rb(9,"label",7),d.Hc(10,"Description"),d.Qb(),d.Nb(11,"textarea",8),d.Qb(),d.Qb(),d.Qb(),d.Rb(12,"div",4),d.Rb(13,"div",5),d.Rb(14,"div",9),d.Rb(15,"label",10),d.Hc(16,"From date"),d.Qb(),d.Nb(17,"input",11),d.Qb(),d.Rb(18,"div",9),d.Rb(19,"label",12),d.Hc(20,"To date"),d.Qb(),d.Nb(21,"input",13),d.Qb(),d.Qb(),d.Qb(),d.Rb(22,"button",14),d.Hc(23," Update "),d.Qb(),d.Rb(24,"button",15),d.Hc(25," Cancel "),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t&&(d.zb(5),d.mc("formGroup",e.addWorkFlowForm),d.zb(17),d.mc("disabled",!e.addWorkFlowForm.valid),d.zb(2),d.mc("routerLink","/workflow-changes"))},directives:[r.t,r.k,r.e,r.a,r.j,r.d,c.c],styles:[""]}),t})();var j=o("jljr"),x=o("umRm");const L=[{path:"",component:j.a,children:[{path:"workflow-changes",component:y},{path:"workflow-changes/:id",component:D},{path:"add-workflow-change",component:_},{path:"edit-workflow-change/:id",component:N},{path:"workflow-change/:id",component:D}]},{path:"",component:x.a,children:[]}];let P=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[c.f.forChild(L)],c.f]}),t})();var B=o("WM+C");let G=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[i.b,P,r.o,B.a,w.b]]}),t})()}}]);