!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{Ft9A:function(e,n,r){"use strict";r.r(n),r.d(n,"StationeryModule",(function(){return ft}));var a,o=r("ofXK"),s=r("tyNb"),c=r("mrSG"),d=r("NiRy"),u=r("Jdlf"),l=r("T2nI"),b=r("fXoL"),y=r("Mtp9"),f=r("7o2P"),p=((a=function(){function e(i){t(this,e),this.commonService=i,this.endpoint="stationery/"}return i(e,[{key:"addStationery",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.post(e.endpoint,t).then((function(t){i(t)}),(function(t){n(t)}))}))}},{key:"getStationeries",value:function(){var t=this;return new Promise((function(e,i){t.commonService.get(t.endpoint).then((function(t){e(t)}),(function(t){i(t)}))}))}},{key:"getStationery",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.get(e.endpoint+t+"/").then((function(t){i(t)}),(function(t){n(t)}))}))}},{key:"editStationery",value:function(t,e){var i=this;return new Promise((function(n,r){i.commonService.update(i.endpoint+t+"/",e).then((function(t){n(!0)}),(function(t){r(!1)}))}))}},{key:"deleteStationery",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.delete(e.endpoint+t+"/").then((function(t){i(!0)}),(function(t){n(!1)}))}))}}]),e}()).\u0275fac=function(t){return new(t||a)(b.Zb(f.a))},a.\u0275prov=b.Ib({token:a,factory:a.\u0275fac,providedIn:"root"}),a),h=r("a9NN"),v=r("4PCd"),m=r("njyG");function g(t,e){if(1&t){var i=b.Sb();b.Rb(0,"button",7),b.cc("click",(function(){return b.wc(i),b.gc().addStationery()})),b.Hc(1," Stationery Request "),b.Qb()}}var S=function(t){return["/stationery",t]};function k(t,e){if(1&t&&(b.Rb(0,"span",15),b.Nb(1,"i",16),b.Qb()),2&t){var i=b.gc().$implicit;b.mc("routerLink",b.qc(1,S,i.workflow_id))}}var R=function(t){return["/edit-stationery",t]};function w(t,e){if(1&t&&(b.Rb(0,"span",17),b.Nb(1,"i",18),b.Qb()),2&t){var i=b.gc().$implicit;b.mc("routerLink",b.qc(1,R,i.workflow_id))}}function D(t,e){1&t&&(b.Rb(0,"span",19),b.Nb(1,"i",20),b.Qb())}function Q(t,e){if(1&t&&(b.Rb(0,"tr"),b.Rb(1,"td"),b.Hc(2),b.hc(3,"date"),b.Qb(),b.Rb(4,"td"),b.Hc(5),b.Qb(),b.Rb(6,"td"),b.Hc(7,"In Progress"),b.Qb(),b.Rb(8,"td"),b.Hc(9),b.hc(10,"date"),b.Qb(),b.Rb(11,"td",11),b.Fc(12,k,2,3,"span",12),b.Fc(13,w,2,3,"span",13),b.Fc(14,D,2,0,"span",14),b.Qb(),b.Qb()),2&t){var i=e.$implicit,n=b.gc(2);b.zb(2),b.Kc(" TML/",i.process.process_code," ",b.jc(3,8,i.date,"yyyy")," "),b.zb(3),b.Kc(" ",i.profile.user.first_name," ",i.profile.user.last_name," "),b.zb(4),b.Ic(b.ic(10,11,i.date)),b.zb(3),b.mc("ngIf",n.checkButton("view-stationery")),b.zb(1),b.mc("ngIf",n.checkButton("edit-stationery")),b.zb(1),b.mc("ngIf",n.checkButton("delete-stationery"))}}function I(t,e){if(1&t&&(b.Rb(0,"table",8),b.Rb(1,"thead"),b.Rb(2,"tr"),b.Rb(3,"th"),b.Hc(4,"Ref ID"),b.Qb(),b.Rb(5,"th"),b.Hc(6,"Requested By"),b.Qb(),b.Rb(7,"th"),b.Hc(8,"Status"),b.Qb(),b.Rb(9,"th"),b.Hc(10,"Date"),b.Qb(),b.Rb(11,"th",9),b.Hc(12,"Options"),b.Qb(),b.Qb(),b.Qb(),b.Rb(13,"tbody"),b.Fc(14,Q,15,13,"tr",10),b.Qb(),b.Qb()),2&t){var i=b.gc();b.mc("dtOptions",i.dtOptions),b.zb(14),b.mc("ngForOf",i.requests)}}var _,x,F=((_=function(){function e(i,n,r,a,o){t(this,e),this.router=i,this.sidebarService=n,this.stationaryService=r,this.requestService=a,this.rolePermissionsState=o,this.dtOptions=u.a}return i(e,[{key:"getRequests",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.requestService.getRequests("requests","process_code="+l.a.AddStationery);case 3:this.requests=t.sent,console.log(this.requests),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getStationeries",value:function(){var t=this;this.stationaryService.getStationeries().then((function(e){t.stationeries=e,console.log(e)}),(function(t){}))}},{key:"viewStationery",value:function(t){this.router.navigate(["/stationery",t])}},{key:"editStationery",value:function(t){this.router.navigate(["/edit-stationery",t])}},{key:"deleteStationery",value:function(t){var e=this;this.stationaryService.deleteStationery(t).then((function(t){e.getStationeries()}),(function(t){}))}},{key:"addStationery",value:function(){this.router.navigate(["/add-stationery"])}},{key:"checkButton",value:function(t){return Object(d.a)(this.rolePermissionsState,t)}},{key:"ngOnInit",value:function(){this.getRequests(),this.getStationeries(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||_)(b.Mb(s.b),b.Mb(y.a),b.Mb(p),b.Mb(h.a),b.Mb(v.a))},_.\u0275cmp=b.Gb({type:_,selectors:[["app-stationeries"]],decls:9,vars:2,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[1,"text-left"],["class","btn btn-primary btn-sm mdi mdi-plus-circle",3,"click",4,"ngIf"],[1,"table-responsive"],["class","table table-striped table-bordered","datatable","",3,"dtOptions",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mdi","mdi-plus-circle",3,"click"],["datatable","",1,"table","table-striped","table-bordered",3,"dtOptions"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["class","control text-secondary","title","View Item",3,"routerLink",4,"ngIf"],["class","control text-secondary","title","Edit Item",3,"routerLink",4,"ngIf"],["class","control text-secondary","title","Delete Item",4,"ngIf"],["title","View Item",1,"control","text-secondary",3,"routerLink"],[1,"mdi","mdi-eye","option-icon"],["title","Edit Item",1,"control","text-secondary",3,"routerLink"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(t,e){1&t&&(b.Rb(0,"div",0),b.Rb(1,"div",1),b.Rb(2,"strong"),b.Hc(3,"Stationery Requests"),b.Qb(),b.Qb(),b.Rb(4,"div",2),b.Rb(5,"p",3),b.Fc(6,g,2,0,"button",4),b.Qb(),b.Rb(7,"div",5),b.Fc(8,I,15,2,"table",6),b.Qb(),b.Qb(),b.Qb()),2&t&&(b.zb(6),b.mc("ngIf",e.checkButton("add-stationery")),b.zb(2),b.mc("ngIf",e.requests))},directives:[o.l,m.a,o.k,s.c],pipes:[o.d],styles:[""]}),_),q=r("3Pt+"),O=r("YqHM"),M=r("6R1s"),H=((x=function(){function e(i){t(this,e),this.commonService=i,this.endpoint="stationary_details/"}return i(e,[{key:"addStationeryDetail",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.post(e.endpoint,t).then((function(t){i(t)}),(function(t){n(t)}))}))}},{key:"getStationeryDetails",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.get("".concat(e.endpoint,"?fk_stationeryid=").concat(t)).then((function(t){i(t)}),(function(t){n(t)}))}))}},{key:"getStationeryDetail",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.get(e.endpoint+t+"/").then((function(t){i(t)}),(function(t){n(t)}))}))}},{key:"editStationeryDetail",value:function(t,e){var i=this;return new Promise((function(n,r){i.commonService.update(i.endpoint+t+"/",e).then((function(t){n(t)}),(function(t){r(!1)}))}))}},{key:"deleteStationeryDetail",value:function(t){var e=this;return new Promise((function(i,n){e.commonService.delete(e.endpoint+t+"/").then((function(t){i(!0)}),(function(t){n(!1)}))}))}}]),e}()).\u0275fac=function(t){return new(t||x)(b.Zb(f.a))},x.\u0275prov=b.Ib({token:x,factory:x.\u0275fac,providedIn:"root"}),x),z=r("SYt/");function T(t,e){if(1&t){var i=b.Sb();b.Rb(0,"tr"),b.Rb(1,"td"),b.Hc(2),b.Qb(),b.Rb(3,"td"),b.Hc(4),b.Qb(),b.Rb(5,"td",4),b.Rb(6,"span",5),b.cc("click",(function(){b.wc(i);var t=e.$implicit;return b.gc(2).edit(t.pk_stationery_detailid)})),b.Nb(7,"i",6),b.Qb(),b.Rb(8,"span",7),b.cc("click",(function(){b.wc(i);var t=e.$implicit;return b.gc(2).delete(t.pk_stationery_detailid)})),b.Nb(9,"i",8),b.Qb(),b.Qb(),b.Qb()}if(2&t){var n=e.$implicit;b.zb(2),b.Ic(n.stationaryType.type),b.zb(2),b.Ic(n.quantity)}}function j(t,e){if(1&t&&(b.Rb(0,"table",1),b.Rb(1,"thead"),b.Rb(2,"tr"),b.Rb(3,"th"),b.Hc(4,"Stationary Type"),b.Qb(),b.Rb(5,"th"),b.Hc(6,"Quantity"),b.Qb(),b.Rb(7,"th",2),b.Hc(8,"Options"),b.Qb(),b.Qb(),b.Qb(),b.Rb(9,"tbody"),b.Fc(10,T,10,2,"tr",3),b.Qb(),b.Qb()),2&t){var i=b.gc();b.zb(10),b.mc("ngForOf",i.stationaryDetails)}}var P,N=((P=function(){function e(){t(this,e),this.EditStationery=new b.n,this.DeleteStationery=new b.n}return i(e,[{key:"edit",value:function(t){this.EditStationery.emit(t)}},{key:"delete",value:function(t){this.DeleteStationery.emit(t)}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||P)},P.\u0275cmp=b.Gb({type:P,selectors:[["app-stationery-details"]],inputs:{stationaryDetails:"stationaryDetails"},outputs:{EditStationery:"EditStationery",DeleteStationery:"DeleteStationery"},decls:1,vars:1,consts:[["class","table table-striped table-bordered",4,"ngIf"],[1,"table","table-striped","table-bordered"],["width","80",1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["title","Edit Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(t,e){1&t&&b.Fc(0,j,11,1,"table",0),2&t&&b.mc("ngIf",e.stationaryDetails)},directives:[o.l,o.k],styles:[""]}),P);function E(t,e){if(1&t&&(b.Rb(0,"option",18),b.Hc(1),b.Qb()),2&t){var i=e.$implicit;b.nc("value",i.pk_stationery_typeid),b.zb(1),b.Jc(" ",i.type," ")}}function B(t,e){1&t&&b.Nb(0,"i",19)}function G(t,e){1&t&&(b.Rb(0,"span"),b.Hc(1,"update"),b.Qb())}function C(t,e){if(1&t){var i=b.Sb();b.Rb(0,"app-stationery-details",20),b.cc("DeleteStationery",(function(t){return b.wc(i),b.gc().deleteStationery(t)}))("EditStationery",(function(t){return b.wc(i),b.gc().editStationery(t)})),b.Qb()}if(2&t){var n=b.gc();b.mc("stationaryDetails",n.stationaryDetails)}}function $(t,e){1&t&&(b.Rb(0,"div",21),b.Hc(1," stationary not added "),b.Qb())}var J,L=((J=function(){function e(i,n,r,a,o,s,c){t(this,e),this.formBuilder=i,this.stationeryTypeService=n,this.stationaryService=r,this.stationDetailService=a,this.router=o,this.processService=s,this.sidebarService=c,this.stationaryDetails=[],this.editMode=!1}return i(e,[{key:"initForm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addStationeryForm=this.formBuilder.group({pk_stationery_detailid:t.pk_stationery_detailid,fk_stationeryid:[t.fk_stationeryid,q.r.compose([])],fk_stationery_typeid:[t.fk_stationery_typeid,q.r.compose([q.r.required])],quantity:[t.quantity,q.r.compose([q.r.required])]})}},{key:"checkIfAdded",value:function(t){return this.stationaryDetails.find((function(e){return e.fk_stationery_typeid===t}))}},{key:"editStationery",value:function(t){var e=this.stationaryDetails.findIndex((function(e){return e.pk_stationery_detailid===t})),i=this.stationaryDetails.splice(e,1);this.editMode=!0,this.initForm(i[0])}},{key:"deleteStationery",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stationDetailService.deleteStationeryDetail(t);case 3:i=this.stationaryDetails.findIndex((function(e){return e.pk_stationery_detailid===t})),this.stationaryDetails.splice(i,1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getStationeryType",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stationeryTypeService.getStationeryTypes();case 2:this.stationeryTypes=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"updateStationeryDetail",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stationDetailService.editStationeryDetail(t.pk_stationery_detailid,t);case 3:i=e.sent,this.editMode=!1,this.stationaryDetails.push(i),this.initForm(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"addStationDetail",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object.assign(Object.assign({},this.addStationeryForm.value),{fk_stationeryid:this.stationary.pk_stationeryid}),!this.editMode){t.next=5;break}this.updateStationeryDetail(e),t.next=14;break;case 5:return t.prev=5,t.next=8,this.stationDetailService.addStationeryDetail(e);case 8:i=t.sent,this.stationaryDetails.push(i),this.initForm(),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(5);case 14:case"end":return t.stop()}}),t,this,[[5,12]])})))}},{key:"addStationery",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stationary){t.next=9;break}return t.prev=1,t.next=4,this.stationaryService.addStationery({fk_processid:this.processId});case 4:this.stationary=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:this.addStationDetail();case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"navigateToDetails",value:function(){this.router.navigate(["/stationery",this.stationaryDetails[0].fk_stationeryid])}},{key:"ngOnInit",value:function(){var t=this;Object(O.a)(l.a.AddStationery,this.processService).then((function(e){return t.processId=e})),this.getStationeryType(),this.initForm(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||J)(b.Mb(q.b),b.Mb(M.a),b.Mb(p),b.Mb(H),b.Mb(s.b),b.Mb(z.a),b.Mb(y.a))},J.\u0275cmp=b.Gb({type:J,selectors:[["app-add-stationery"]],decls:24,vars:8,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-5"],["formControlName","fk_stationery_typeid","id","",1,"form-control"],["selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","quantity","placeholder","quantity",1,"form-control"],[1,"col-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","mdi mdi-plus",4,"ngIf"],[4,"ngIf"],[3,"stationaryDetails","DeleteStationery","EditStationery",4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"mdi","mdi-plus"],[3,"stationaryDetails","DeleteStationery","EditStationery"],["role","alert",1,"alert","alert-info"]],template:function(t,e){1&t&&(b.Rb(0,"div",0),b.Rb(1,"div",1),b.Rb(2,"strong"),b.Hc(3,"Stationery Request Details"),b.Qb(),b.Qb(),b.Rb(4,"div",2),b.Rb(5,"form",3),b.cc("ngSubmit",(function(){return e.addStationery()})),b.Rb(6,"div",4),b.Rb(7,"div",5),b.Rb(8,"div",6),b.Rb(9,"div",4),b.Rb(10,"select",7),b.Rb(11,"option",8),b.Hc(12,"Stationary Types"),b.Qb(),b.Fc(13,E,2,2,"option",9),b.Qb(),b.Qb(),b.Qb(),b.Rb(14,"div",6),b.Nb(15,"input",10),b.Qb(),b.Rb(16,"div",11),b.Rb(17,"button",12),b.Fc(18,B,1,0,"i",13),b.Fc(19,G,2,0,"span",14),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Fc(20,C,1,1,"app-stationery-details",15),b.Fc(21,$,2,0,"div",16),b.Rb(22,"button",17),b.cc("click",(function(){return e.navigateToDetails()})),b.Hc(23," Submit "),b.Qb(),b.Qb(),b.Qb()),2&t&&(b.zb(5),b.mc("formGroup",e.addStationeryForm),b.zb(8),b.mc("ngForOf",e.stationeryTypes),b.zb(4),b.mc("disabled",!e.addStationeryForm.valid),b.zb(1),b.mc("ngIf",!e.editMode),b.zb(1),b.mc("ngIf",e.editMode),b.zb(1),b.mc("ngIf",e.stationaryDetails.length),b.zb(1),b.mc("ngIf",!e.stationaryDetails.length),b.zb(1),b.mc("disabled",!e.stationaryDetails.length))},directives:[q.t,q.k,q.e,q.q,q.j,q.d,q.l,q.s,o.k,q.a,o.l,N],styles:[""]}),J),A=r("m4K9"),K=r.n(A),V=r("DaQG"),X=r.n(V),Y=r("hE/2");function Z(t,e){if(1&t&&(b.Rb(0,"tr"),b.Rb(1,"td"),b.Hc(2),b.Qb(),b.Rb(3,"td"),b.Hc(4),b.Qb(),b.Qb()),2&t){var i=e.$implicit;b.zb(2),b.Ic(i.stationaryType.type),b.zb(2),b.Ic(i.quantity)}}var W,U=((W=function(){function e(i,n,r,a,o){t(this,e),this.activatedRoute=i,this.stationeryService=n,this.sidebarService=r,this.processService=a,this.requestService=o,this.downloadPDF=function(){var t=new K.a("p","pt");t.text("Stationary Details",35,20),X()(t,{html:"#table"}),X()(t,{html:"#table-2"}),t.save("stationary-".concat(Date.now(),".pdf"))},this.stationeryId=this.activatedRoute.snapshot.params.id}return i(e,[{key:"getRequest",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.requestService.getRequests("requests","fk_processid=".concat(this.process.pk_processid,"&workflowid=").concat(this.stationeryId));case 3:e=t.sent,this.request=e[0],t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getProcess",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.processService.getProcessesByCode(l.a.AddStationery);case 3:e=t.sent,this.process=e[0],this.getRequest(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getStationery",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.stationeryService.getStationeryDetails(this.stationeryId);case 3:this.stationeryDetails=t.sent,console.log(this.stationeryDetails),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"ngOnInit",value:function(){this.getStationery(),this.getProcess(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||W)(b.Mb(s.a),b.Mb(H),b.Mb(y.a),b.Mb(z.a),b.Mb(h.a))},W.\u0275cmp=b.Gb({type:W,selectors:[["app-stationery"]],decls:17,vars:6,consts:[[3,"title","downloadButtonClicked","processId","workflowid"],["id","table",1,"table","table-borderless","table-responsive"],["scope","row"],["id","table-2",1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Rb(0,"app-view-card",0),b.Rb(1,"table",1),b.Rb(2,"tbody"),b.Rb(3,"tr"),b.Rb(4,"th",2),b.Hc(5,"Requested by :"),b.Qb(),b.Rb(6,"td"),b.Hc(7),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Rb(8,"table",3),b.Rb(9,"thead"),b.Rb(10,"tr"),b.Rb(11,"th"),b.Hc(12,"Stationery Type"),b.Qb(),b.Rb(13,"th"),b.Hc(14,"Quantity"),b.Qb(),b.Qb(),b.Qb(),b.Rb(15,"tbody"),b.Fc(16,Z,5,2,"tr",4),b.Qb(),b.Qb(),b.Qb()),2&t&&(b.mc("title","Stationery Details")("downloadButtonClicked",e.downloadPDF)("processId",e.process&&e.process.pk_processid)("workflowid",e.stationeryId),b.zb(7),b.Jc(" ",e.request&&e.request.profile.user.first_name+" "+e.request.profile.user.last_name," "),b.zb(9),b.mc("ngForOf",e.stationeryDetails))},directives:[Y.a,o.k],styles:[""]}),W);function tt(t,e){if(1&t&&(b.Rb(0,"option",18),b.Hc(1),b.Qb()),2&t){var i=e.$implicit;b.nc("value",i.pk_stationery_typeid),b.zb(1),b.Jc(" ",i.type," ")}}function et(t,e){1&t&&b.Nb(0,"i",19)}function it(t,e){1&t&&(b.Rb(0,"span"),b.Hc(1,"update"),b.Qb())}function nt(t,e){if(1&t){var i=b.Sb();b.Rb(0,"app-stationery-details",20),b.cc("DeleteStationery",(function(t){return b.wc(i),b.gc().deleteStationery(t)}))("EditStationery",(function(t){return b.wc(i),b.gc().editStationery(t)})),b.Qb()}if(2&t){var n=b.gc();b.mc("stationaryDetails",n.stationaryDetails)}}function rt(t,e){1&t&&(b.Rb(0,"div",21),b.Hc(1," stationary not added "),b.Qb())}var at,ot,st,ct=((at=function(){function e(i,n,r,a,o,s,c,d){t(this,e),this.formBuilder=i,this.stationeryTypeService=n,this.stationaryService=r,this.stationDetailService=a,this.router=o,this.processService=s,this.sidebarService=c,this.activatedRoute=d,this.stationaryDetails=[],this.editMode=!1,this.stationaryId=this.activatedRoute.snapshot.params.id}return i(e,[{key:"getStationary",value:function(){var t=this;this.stationaryService.getStationery(this.stationaryId).then((function(e){t.stationary=e,t.stationaryDetails=t.stationary.stationary_details}),(function(t){}))}},{key:"initForm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addStationeryForm=this.formBuilder.group({pk_stationery_detailid:t.pk_stationery_detailid,fk_stationeryid:[t.fk_stationeryid,q.r.compose([])],fk_stationery_typeid:[t.fk_stationery_typeid,q.r.compose([q.r.required])],quantity:[t.quantity,q.r.compose([q.r.required])]})}},{key:"checkIfAdded",value:function(t){return this.stationaryDetails.find((function(e){return e.fk_stationery_typeid===t}))}},{key:"editStationery",value:function(t){var e=this.stationaryDetails.findIndex((function(e){return e.pk_stationery_detailid===t})),i=this.stationaryDetails.splice(e,1);this.editMode=!0,this.initForm(i[0])}},{key:"deleteStationery",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stationDetailService.deleteStationeryDetail(t);case 3:i=this.stationaryDetails.findIndex((function(e){return e.pk_stationery_detailid===t})),this.stationaryDetails.splice(i,1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getStationeryType",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stationeryTypeService.getStationeryTypes();case 2:this.stationeryTypes=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"updateStationeryDetail",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stationDetailService.editStationeryDetail(t.pk_stationery_detailid,t);case 3:i=e.sent,this.editMode=!1,this.stationaryDetails.push(i),this.initForm(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"addStationDetail",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object.assign(Object.assign({},this.addStationeryForm.value),{fk_stationeryid:this.stationary.pk_stationeryid}),!this.editMode){t.next=5;break}this.updateStationeryDetail(e),t.next=14;break;case 5:return t.prev=5,t.next=8,this.stationDetailService.addStationeryDetail(e);case 8:i=t.sent,this.stationaryDetails.push(i),this.initForm(),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(5);case 14:case"end":return t.stop()}}),t,this,[[5,12]])})))}},{key:"addStationery",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stationary){t.next=9;break}return t.prev=1,t.next=4,this.stationaryService.addStationery({fk_processid:this.processId});case 4:this.stationary=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:this.addStationDetail();case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"navigateToDetails",value:function(){this.router.navigate(["/stationery",this.stationaryDetails[0].fk_stationeryid])}},{key:"ngOnInit",value:function(){var t=this;Object(O.a)(l.a.AddStationery,this.processService).then((function(e){return t.processId=e})),this.getStationary(),this.getStationeryType(),this.initForm(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||at)(b.Mb(q.b),b.Mb(M.a),b.Mb(p),b.Mb(H),b.Mb(s.b),b.Mb(z.a),b.Mb(y.a),b.Mb(s.a))},at.\u0275cmp=b.Gb({type:at,selectors:[["app-edit-stationery"]],decls:24,vars:8,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-5"],["formControlName","fk_stationery_typeid","id","",1,"form-control"],["selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","quantity","placeholder","quantity",1,"form-control"],[1,"col-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","mdi mdi-plus",4,"ngIf"],[4,"ngIf"],[3,"stationaryDetails","DeleteStationery","EditStationery",4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"mdi","mdi-plus"],[3,"stationaryDetails","DeleteStationery","EditStationery"],["role","alert",1,"alert","alert-info"]],template:function(t,e){1&t&&(b.Rb(0,"div",0),b.Rb(1,"div",1),b.Rb(2,"strong"),b.Hc(3,"Stationery Request Details"),b.Qb(),b.Qb(),b.Rb(4,"div",2),b.Rb(5,"form",3),b.cc("ngSubmit",(function(){return e.addStationery()})),b.Rb(6,"div",4),b.Rb(7,"div",5),b.Rb(8,"div",6),b.Rb(9,"div",4),b.Rb(10,"select",7),b.Rb(11,"option",8),b.Hc(12,"Stationary Types"),b.Qb(),b.Fc(13,tt,2,2,"option",9),b.Qb(),b.Qb(),b.Qb(),b.Rb(14,"div",6),b.Nb(15,"input",10),b.Qb(),b.Rb(16,"div",11),b.Rb(17,"button",12),b.Fc(18,et,1,0,"i",13),b.Fc(19,it,2,0,"span",14),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Fc(20,nt,1,1,"app-stationery-details",15),b.Fc(21,rt,2,0,"div",16),b.Rb(22,"button",17),b.cc("click",(function(){return e.navigateToDetails()})),b.Hc(23," Submit "),b.Qb(),b.Qb(),b.Qb()),2&t&&(b.zb(5),b.mc("formGroup",e.addStationeryForm),b.zb(8),b.mc("ngForOf",e.stationeryTypes),b.zb(4),b.mc("disabled",!e.addStationeryForm.valid),b.zb(1),b.mc("ngIf",!e.editMode),b.zb(1),b.mc("ngIf",e.editMode),b.zb(1),b.mc("ngIf",e.stationaryDetails.length),b.zb(1),b.mc("ngIf",!e.stationaryDetails.length),b.zb(1),b.mc("disabled",!e.stationaryDetails.length))},directives:[q.t,q.k,q.e,q.q,q.j,q.d,q.l,q.s,o.k,q.a,o.l,N],styles:[""]}),at),dt=r("jljr"),ut=r("umRm"),lt=[{path:"",component:dt.a,children:[{path:"stationeries",component:F},{path:"add-stationery",component:L},{path:"edit-stationery/:id",component:ct}]},{path:"",component:ut.a,children:[{path:"stationery/:id",component:U}]}],bt=((ot=function e(){t(this,e)}).\u0275mod=b.Kb({type:ot}),ot.\u0275inj=b.Jb({factory:function(t){return new(t||ot)},imports:[[s.f.forChild(lt)],s.f]}),ot),yt=r("WM+C"),ft=((st=function e(){t(this,e)}).\u0275mod=b.Kb({type:st}),st.\u0275inj=b.Jb({factory:function(t){return new(t||st)},imports:[[o.b,q.o,bt,m.b,yt.a]]}),st)}}])}();