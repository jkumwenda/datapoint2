!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"2AdV":function(e,r,n){"use strict";n.r(r),n.d(r,"WorkflowChangeModule",(function(){return Y}));var i,c=n("3Pt+"),a=n("ofXK"),s=n("tyNb"),d=n("mrSG"),b=n("NiRy"),l=n("Jdlf"),u=n("fXoL"),f=n("7o2P"),h=((i=function(){function e(o){t(this,e),this.commonService=o,this.endpoint="workflow_rights/"}return o(e,[{key:"addWorkflowRights",value:function(t){var e=this;return new Promise((function(o,r){e.commonService.post(e.endpoint,t).then((function(t){o(t)}),(function(t){r(t)}))}))}},{key:"getWorkflowRights",value:function(){var t=this;return new Promise((function(e,o){t.commonService.get(t.endpoint).then((function(t){e(t)}),(function(t){o(t)}))}))}},{key:"getWorkflowRight",value:function(t){var e=this;return new Promise((function(o,r){e.commonService.get(e.endpoint+t+"/").then((function(t){o(t)}),(function(t){r(t)}))}))}},{key:"editWorkflowRights",value:function(t,e){var o=this;return new Promise((function(r,n){o.commonService.update(o.endpoint+t+"/",e).then((function(t){r(t)}),(function(t){n(!1)}))}))}},{key:"deleteWorkflowRights",value:function(t){var e=this;return new Promise((function(o,r){e.commonService.delete(e.endpoint+t+"/").then((function(t){o(!0)}),(function(t){r(!1)}))}))}}]),e}()).\u0275fac=function(t){return new(t||i)(u.Zb(f.a))},i.\u0275prov=u.Ib({token:i,factory:i.\u0275fac,providedIn:"root"}),i),p=n("4PCd"),w=n("Mtp9"),m=n("njyG"),k=function(){return["/add-workflow-change"]};function v(t,e){1&t&&(u.Rb(0,"button",6),u.Hc(1," Workflow Change "),u.Qb()),2&t&&u.mc("routerLink",u.pc(1,k))}function g(t,e){if(1&t){var o=u.Sb();u.Rb(0,"span",14),u.cc("click",(function(){u.wc(o);var t=u.gc().$implicit;return u.gc(2).view(t.pk_workflow_rightid)})),u.Nb(1,"i",15),u.Qb()}}var R=function(t){return["/edit-workflow-change",t]};function y(t,e){if(1&t&&(u.Rb(0,"span",16),u.Nb(1,"i",17),u.Qb()),2&t){var o=u.gc().$implicit;u.mc("routerLink",u.qc(1,R,o.pk_workflow_rightid))}}function Q(t,e){if(1&t){var o=u.Sb();u.Rb(0,"span",18),u.cc("click",(function(){u.wc(o);var t=u.gc().$implicit;return u.gc(2).delete(t.pk_workflow_rightid)})),u.Nb(1,"i",19),u.Qb()}}function F(t,e){if(1&t&&(u.Rb(0,"tr"),u.Rb(1,"td"),u.Hc(2),u.Qb(),u.Rb(3,"td"),u.Hc(4),u.Qb(),u.Rb(5,"td"),u.Hc(6),u.Qb(),u.Rb(7,"td"),u.Hc(8),u.Qb(),u.Rb(9,"td",10),u.Fc(10,g,2,0,"span",11),u.Fc(11,y,2,3,"span",12),u.Fc(12,Q,2,0,"span",13),u.Qb(),u.Qb()),2&t){var o=e.$implicit,r=u.gc(2);u.zb(2),u.Jc("TML/WC ",o.pk_workflow_rightid,""),u.zb(2),u.Ic(o.date_from),u.zb(2),u.Ic(o.date_to),u.zb(2),u.Ic(o.description),u.zb(2),u.mc("ngIf",r.checkButton("view-workflow-changes")),u.zb(1),u.mc("ngIf",r.checkButton("edit-workflow-change")),u.zb(1),u.mc("ngIf",r.checkButton("delete-workflow-change"))}}function I(t,e){if(1&t&&(u.Rb(0,"table",7),u.Rb(1,"thead"),u.Rb(2,"tr"),u.Rb(3,"th"),u.Hc(4,"Ref ID"),u.Qb(),u.Rb(5,"th"),u.Hc(6,"From"),u.Qb(),u.Rb(7,"th"),u.Hc(8,"To"),u.Qb(),u.Rb(9,"th"),u.Hc(10,"Description"),u.Qb(),u.Rb(11,"th",8),u.Hc(12,"Options"),u.Qb(),u.Qb(),u.Qb(),u.Rb(13,"tbody"),u.Fc(14,F,13,7,"tr",9),u.Qb(),u.Qb()),2&t){var o=u.gc();u.mc("dtOptions",o.dtOptions),u.zb(14),u.mc("ngForOf",o.workFlowRights)}}var S,_,C=((S=function(){function e(o,r,n,i){t(this,e),this.workflowRightsService=o,this.router=r,this.rolePermissionsState=n,this.sidebarService=i,this.dtOptions=l.a}return o(e,[{key:"getWorkFlow",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.workflowRightsService.getWorkflowRights();case 3:this.workFlowRights=t.sent,console.log(this.workFlowRights),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"checkButton",value:function(t){return Object(b.a)(this.rolePermissionsState,t)}},{key:"view",value:function(t){this.router.navigate(["workflow-change",t])}},{key:"edit",value:function(t){}},{key:"delete",value:function(t){}},{key:"ngOnInit",value:function(){this.getWorkFlow(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||S)(u.Mb(h),u.Mb(s.b),u.Mb(p.a),u.Mb(w.a))},S.\u0275cmp=u.Gb({type:S,selectors:[["app-workflow-changes"]],decls:8,vars:2,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[1,"text-left"],["class","btn btn-primary btn-sm mdi mdi-plus-circle",3,"routerLink",4,"ngIf"],["datatable","","class","table table-striped table-bordered",3,"dtOptions",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mdi","mdi-plus-circle",3,"routerLink"],["datatable","",1,"table","table-striped","table-bordered",3,"dtOptions"],["width","80",1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["class","control text-secondary","title","View Item",3,"click",4,"ngIf"],["class","control text-secondary","title","Edit Item",3,"routerLink",4,"ngIf"],["class","control text-secondary","title","Delete Item",3,"click",4,"ngIf"],["title","View Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-eye","option-icon"],["title","Edit Item",1,"control","text-secondary",3,"routerLink"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(t,e){1&t&&(u.Rb(0,"div",0),u.Rb(1,"div",1),u.Rb(2,"strong"),u.Hc(3,"Workflow Change"),u.Qb(),u.Qb(),u.Rb(4,"div",2),u.Rb(5,"p",3),u.Fc(6,v,2,2,"button",4),u.Qb(),u.Fc(7,I,15,2,"table",5),u.Qb(),u.Qb()),2&t&&(u.zb(6),u.mc("ngIf",e.checkButton("add-role")),u.zb(1),u.mc("ngIf",e.workFlowRights))},directives:[a.l,s.c,m.a,a.k],styles:[""]}),S),W=n("YqHM"),H=n("T2nI"),x=n("SYt/"),M=((_=function(){function e(o,r,n,i,c){t(this,e),this.workflowService=o,this.formBuilder=r,this.router=n,this.processService=i,this.sidebarService=c}return o(e,[{key:"submit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object.assign({fk_processid:this.processId},this.addWorkFlowForm.value),t.prev=1,t.next=4,this.workflowService.addWorkflowRights(e);case 4:o=t.sent,this.router.navigate(["workflow-changes",o.pk_workflow_rightid]),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])})))}},{key:"initForm",value:function(){this.addWorkFlowForm=this.formBuilder.group({description:["",c.r.compose([c.r.required])],date_from:["",c.r.compose([c.r.required])],date_to:["",c.r.compose([c.r.required])]})}},{key:"ngOnInit",value:function(){var t=this;Object(W.a)(H.a.AddWorkFlowChange,this.processService).then((function(e){return t.processId=e})),this.initForm(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||_)(u.Mb(h),u.Mb(c.b),u.Mb(s.b),u.Mb(x.a),u.Mb(w.a))},_.\u0275cmp=u.Gb({type:_,selectors:[["app-add-workflow-change"]],decls:26,vars:3,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-Firstname"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-10"],["for","description"],["type","textarea","id","description","placeholder","Description. ","rows","4","formControlName","description",1,"form-control"],[1,"col-5"],["for","from_date"],["type","date","id","from_date","formControlName","date_from","placeholder","Date from",1,"form-control"],["for","to_date"],["type","date","id","to_date","formControlName","date_to","placeholder","Date to",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit",1,"btn",3,"routerLink"]],template:function(t,e){1&t&&(u.Rb(0,"div",0),u.Rb(1,"div",1),u.Rb(2,"strong"),u.Hc(3,"Workflow Change Details"),u.Qb(),u.Qb(),u.Rb(4,"div",2),u.Rb(5,"form",3),u.cc("ngSubmit",(function(){return e.submit()})),u.Rb(6,"div",4),u.Rb(7,"div",5),u.Rb(8,"div",6),u.Rb(9,"label",7),u.Hc(10,"Description"),u.Qb(),u.Nb(11,"textarea",8),u.Qb(),u.Qb(),u.Qb(),u.Rb(12,"div",4),u.Rb(13,"div",5),u.Rb(14,"div",9),u.Rb(15,"label",10),u.Hc(16,"From date"),u.Qb(),u.Nb(17,"input",11),u.Qb(),u.Rb(18,"div",9),u.Rb(19,"label",12),u.Hc(20,"To date"),u.Qb(),u.Nb(21,"input",13),u.Qb(),u.Qb(),u.Qb(),u.Rb(22,"button",14),u.Hc(23," Submit "),u.Qb(),u.Rb(24,"button",15),u.Hc(25,"Cancel"),u.Qb(),u.Qb(),u.Qb(),u.Qb()),2&t&&(u.zb(5),u.mc("formGroup",e.addWorkFlowForm),u.zb(17),u.mc("disabled",!e.addWorkFlowForm.valid),u.zb(2),u.mc("routerLink","/workflow-changes"))},directives:[c.t,c.k,c.e,c.a,c.j,c.d,s.c],styles:[""]}),_),q=n("m4K9"),O=n.n(q),z=n("DaQG"),D=n.n(z),N=n("a9NN"),j=n("hE/2");function P(t,e){if(1&t&&(u.Rb(0,"table",2),u.Rb(1,"tbody"),u.Rb(2,"tr"),u.Rb(3,"th",3),u.Hc(4,"Requested by :"),u.Qb(),u.Rb(5,"td"),u.Hc(6),u.Qb(),u.Qb(),u.Rb(7,"tr"),u.Rb(8,"th",3),u.Hc(9,"From :"),u.Qb(),u.Rb(10,"td"),u.Hc(11),u.Qb(),u.Qb(),u.Rb(12,"tr"),u.Rb(13,"th",3),u.Hc(14,"To :"),u.Qb(),u.Rb(15,"td"),u.Hc(16),u.Qb(),u.Qb(),u.Rb(17,"tr"),u.Rb(18,"th",3),u.Hc(19,"Description :"),u.Qb(),u.Rb(20,"td"),u.Hc(21),u.Qb(),u.Qb(),u.Qb(),u.Qb()),2&t){var o=u.gc();u.zb(6),u.Jc(" ",o.request&&o.request.profile.user.first_name+" "+o.request.profile.user.last_name," "),u.zb(5),u.Ic(o.workflowChange.date_from),u.zb(5),u.Ic(o.workflowChange.date_to),u.zb(5),u.Ic(o.workflowChange.description)}}var L,B,G,T,J=((B=function(){function e(o,r,n,i){t(this,e),this.activatedRoute=o,this.workflowRightsService=r,this.sidebarService=n,this.requestService=i,this.downloadPDF=function(){var t=new O.a("p","pt");t.text("workflow Change Details",35,20),D()(t,{html:"#table"}),t.save("workflowchange-".concat(Date.now(),".pdf"))},this.workflowId=this.activatedRoute.snapshot.params.id}return o(e,[{key:"getRequest",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.requestService.getRequests("requests","fk_processid=".concat(this.workflowChange.fk_processid,"&workflowid=").concat(this.workflowId));case 3:e=t.sent,this.request=e[0],t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getWorkRightChange",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.workflowRightsService.getWorkflowRight(this.workflowId);case 3:this.workflowChange=t.sent,this.getRequest(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"ngOnInit",value:function(){this.getWorkRightChange(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||B)(u.Mb(s.a),u.Mb(h),u.Mb(w.a),u.Mb(N.a))},B.\u0275cmp=u.Gb({type:B,selectors:[["app-workflow-change"]],decls:2,vars:4,consts:[["title","Workflow Change",3,"processId","workflowid","downloadButtonClicked"],["class","table table-borderless table-responsive",4,"ngIf"],[1,"table","table-borderless","table-responsive"],["scope","row"]],template:function(t,e){1&t&&(u.Rb(0,"app-view-card",0),u.Fc(1,P,22,4,"table",1),u.Qb()),2&t&&(u.mc("processId",e.workflowChange&&e.workflowChange.fk_processid)("workflowid",e.workflowId)("downloadButtonClicked",e.downloadPDF),u.zb(1),u.mc("ngIf",e.workflowChange))},directives:[j.a,a.l],styles:[""]}),B),E=((L=function(){function e(o,r,n,i,c,a){t(this,e),this.workflowService=o,this.formBuilder=r,this.router=n,this.processService=i,this.sidebarService=c,this.activatedRoute=a,this.workflowId=this.activatedRoute.snapshot.params.id}return o(e,[{key:"submit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object.assign({fk_processid:this.processId},this.addWorkFlowForm.value),t.prev=1,t.next=4,this.workflowService.editWorkflowRights(this.workflowId,e);case 4:this.router.navigate(["workflow-changes"]),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"getWorkFlowRights",value:function(){var t=this;this.workflowService.getWorkflowRight(this.workflowId).then((function(e){t.initForm(e)}))}},{key:"initForm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addWorkFlowForm=this.formBuilder.group({description:[t.description,c.r.compose([c.r.required])],date_from:[t.date_from,c.r.compose([c.r.required])],date_to:[t.date_to,c.r.compose([c.r.required])]})}},{key:"ngOnInit",value:function(){var t=this;Object(W.a)(H.a.AddWorkFlowChange,this.processService).then((function(e){return t.processId=e})),this.initForm(),this.getWorkFlowRights(),this.sidebarService.setTitle("myRequests")}}]),e}()).\u0275fac=function(t){return new(t||L)(u.Mb(h),u.Mb(c.b),u.Mb(s.b),u.Mb(x.a),u.Mb(w.a),u.Mb(s.a))},L.\u0275cmp=u.Gb({type:L,selectors:[["app-edit-workflow-change"]],decls:26,vars:3,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-Firstname"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-10"],["for","description"],["type","textarea","id","description","placeholder","Description. ","rows","4","formControlName","description",1,"form-control"],[1,"col-5"],["for","from_date"],["type","date","id","from_date","formControlName","date_from","placeholder","Date from",1,"form-control"],["for","to_date"],["type","date","id","to_date","formControlName","date_to","placeholder","Date to",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit",1,"btn",3,"routerLink"]],template:function(t,e){1&t&&(u.Rb(0,"div",0),u.Rb(1,"div",1),u.Rb(2,"strong"),u.Hc(3,"Workflow Change Details"),u.Qb(),u.Qb(),u.Rb(4,"div",2),u.Rb(5,"form",3),u.cc("ngSubmit",(function(){return e.submit()})),u.Rb(6,"div",4),u.Rb(7,"div",5),u.Rb(8,"div",6),u.Rb(9,"label",7),u.Hc(10,"Description"),u.Qb(),u.Nb(11,"textarea",8),u.Qb(),u.Qb(),u.Qb(),u.Rb(12,"div",4),u.Rb(13,"div",5),u.Rb(14,"div",9),u.Rb(15,"label",10),u.Hc(16,"From date"),u.Qb(),u.Nb(17,"input",11),u.Qb(),u.Rb(18,"div",9),u.Rb(19,"label",12),u.Hc(20,"To date"),u.Qb(),u.Nb(21,"input",13),u.Qb(),u.Qb(),u.Qb(),u.Rb(22,"button",14),u.Hc(23," Update "),u.Qb(),u.Rb(24,"button",15),u.Hc(25," Cancel "),u.Qb(),u.Qb(),u.Qb(),u.Qb()),2&t&&(u.zb(5),u.mc("formGroup",e.addWorkFlowForm),u.zb(17),u.mc("disabled",!e.addWorkFlowForm.valid),u.zb(2),u.mc("routerLink","/workflow-changes"))},directives:[c.t,c.k,c.e,c.a,c.j,c.d,s.c],styles:[""]}),L),K=n("jljr"),$=n("umRm"),A=[{path:"",component:K.a,children:[{path:"workflow-changes",component:C},{path:"workflow-changes/:id",component:J},{path:"add-workflow-change",component:M},{path:"edit-workflow-change/:id",component:E},{path:"workflow-change/:id",component:J}]},{path:"",component:$.a,children:[]}],V=((G=function e(){t(this,e)}).\u0275mod=u.Kb({type:G}),G.\u0275inj=u.Jb({factory:function(t){return new(t||G)},imports:[[s.f.forChild(A)],s.f]}),G),X=n("WM+C"),Y=((T=function e(){t(this,e)}).\u0275mod=u.Kb({type:T}),T.\u0275inj=u.Jb({factory:function(t){return new(t||T)},imports:[[a.b,V,c.o,X.a,m.b]]}),T)}}])}();