!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{VSe1:function(t,r,i){"use strict";i.r(r),i.d(r,"ExpenseSheetModule",(function(){return se}));var c,o=i("ofXK"),s=i("tyNb"),u=i("mrSG"),a=i("NiRy"),h=i("Jdlf"),d=i("fXoL"),b=i("7o2P"),p=((c=function(){function t(n){e(this,t),this.commonService=n,this.endpoint="expense_sheets/"}return n(t,[{key:"addExpenseSheet",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.post(t.endpoint,e).then((function(e){n(e)}),(function(e){r(e)}))}))}},{key:"getExpenseSheets",value:function(){var e=this;return new Promise((function(t,n){e.commonService.get(e.endpoint).then((function(e){t(e)}),(function(e){n(e)}))}))}},{key:"getExpenseSheet",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.get(t.endpoint+e+"/").then((function(e){n(e)}),(function(e){r(e)}))}))}},{key:"editExpenseSheet",value:function(e,t){var n=this;return new Promise((function(r,i){n.commonService.update(n.endpoint+e+"/",t).then((function(e){r(e)}),(function(e){i(!1)}))}))}},{key:"deleteExpenseSheet",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.delete(t.endpoint+e+"/").then((function(e){n(!0)}),(function(e){r(!1)}))}))}}]),t}()).\u0275fac=function(e){return new(e||c)(d.Zb(b.a))},c.\u0275prov=d.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),v=i("4PCd"),m=i("Mtp9"),f=i("njyG"),l=function(){return["/add-expense-sheet"]};function x(e,t){1&e&&(d.Rb(0,"button",6),d.Hc(1," Expense Sheet "),d.Qb()),2&e&&d.mc("routerLink",d.pc(1,l))}function S(e,t){if(1&e){var n=d.Sb();d.Rb(0,"span",14),d.cc("click",(function(){d.wc(n);var e=d.gc().$implicit;return d.gc(2).view(e.pk_expense_sheetid)})),d.Nb(1,"i",15),d.Qb()}}function k(e,t){if(1&e){var n=d.Sb();d.Rb(0,"span",16),d.cc("click",(function(){d.wc(n);var e=d.gc().$implicit;return d.gc(2).edit(e.pk_expense_sheetid)})),d.Nb(1,"i",17),d.Qb()}}function R(e,t){if(1&e){var n=d.Sb();d.Rb(0,"span",18),d.cc("click",(function(){d.wc(n);var e=d.gc().$implicit;return d.gc(2).delete(e.pk_expense_sheetid)})),d.Nb(1,"i",19),d.Qb()}}function g(e,t){if(1&e&&(d.Rb(0,"tr"),d.Rb(1,"td"),d.Hc(2),d.Qb(),d.Rb(3,"td"),d.Hc(4),d.Qb(),d.Rb(5,"td"),d.Hc(6),d.Qb(),d.Rb(7,"td"),d.Hc(8),d.Qb(),d.Rb(9,"td"),d.Hc(10),d.hc(11,"date"),d.Qb(),d.Rb(12,"td",10),d.Fc(13,S,2,0,"span",11),d.Fc(14,k,2,0,"span",12),d.Fc(15,R,2,0,"span",13),d.Qb(),d.Qb()),2&e){var n=t.$implicit,r=d.gc(2);d.zb(2),d.Jc("TML/ES ",n.pk_expense_sheetid,""),d.zb(2),d.Ic(n.from_field),d.zb(2),d.Ic(n.to),d.zb(2),d.Ic(n.currency.code+" "+n.amount),d.zb(2),d.Ic(d.ic(11,8,n.date)),d.zb(3),d.mc("ngIf",r.checkButton("view-expense-sheet")),d.zb(1),d.mc("ngIf",r.checkButton("edit-expense-sheet")),d.zb(1),d.mc("ngIf",r.checkButton("delete-expense-sheet"))}}function y(e,t){if(1&e&&(d.Rb(0,"table",7),d.Rb(1,"thead"),d.Rb(2,"tr"),d.Rb(3,"th"),d.Hc(4,"Ref ID"),d.Qb(),d.Rb(5,"th"),d.Hc(6,"From"),d.Qb(),d.Rb(7,"th"),d.Hc(8,"To"),d.Qb(),d.Rb(9,"th"),d.Hc(10,"Amount"),d.Qb(),d.Rb(11,"th"),d.Hc(12,"Date"),d.Qb(),d.Rb(13,"th",8),d.Hc(14,"Options"),d.Qb(),d.Qb(),d.Qb(),d.Rb(15,"tbody"),d.Fc(16,g,16,10,"tr",9),d.Qb(),d.Qb()),2&e){var n=d.gc();d.mc("dtOptions",n.dtOptions),d.zb(16),d.mc("ngForOf",n.expenseSheets)}}var Q,w,_=((Q=function(){function t(n,r,i,c){e(this,t),this.expenseSheetService=n,this.rolePermissionsState=r,this.router=i,this.sidebarService=c,this.dtOptions=h.a}return n(t,[{key:"getExpenseSheets",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.expenseSheetService.getExpenseSheets();case 3:this.expenseSheets=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"checkButton",value:function(e){return Object(a.a)(this.rolePermissionsState,e)}},{key:"edit",value:function(e){this.router.navigate(["edit-expense-sheet",e])}},{key:"delete",value:function(e){}},{key:"view",value:function(e){this.router.navigate(["expense-sheet",e])}},{key:"ngOnInit",value:function(){this.getExpenseSheets(),this.sidebarService.setTitle("myRequests")}}]),t}()).\u0275fac=function(e){return new(e||Q)(d.Mb(p),d.Mb(v.a),d.Mb(s.b),d.Mb(m.a))},Q.\u0275cmp=d.Gb({type:Q,selectors:[["app-expense-sheets"]],decls:8,vars:2,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[1,"text-left"],["class","btn btn-primary btn-sm mdi mdi-plus-circle",3,"routerLink",4,"ngIf"],["datatable","","class","table table-striped table-bordered",3,"dtOptions",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mdi","mdi-plus-circle",3,"routerLink"],["datatable","",1,"table","table-striped","table-bordered",3,"dtOptions"],["width","80",1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["class","control text-secondary","title","View Item",3,"click",4,"ngIf"],["class","control text-secondary","title","Edit Item",3,"click",4,"ngIf"],["class","control text-secondary","title","Delete Item",3,"click",4,"ngIf"],["title","View Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-eye","option-icon"],["title","Edit Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(e,t){1&e&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Rb(2,"strong"),d.Hc(3,"Expense Sheets"),d.Qb(),d.Qb(),d.Rb(4,"div",2),d.Rb(5,"p",3),d.Fc(6,x,2,2,"button",4),d.Qb(),d.Fc(7,y,17,2,"table",5),d.Qb(),d.Qb()),2&e&&(d.zb(6),d.mc("ngIf",t.checkButton("add-role")),d.zb(1),d.mc("ngIf",t.expenseSheets))},directives:[o.l,s.c,f.a,o.k],pipes:[o.d],styles:[""]}),Q),F=i("3Pt+"),I=i("YqHM"),E=i("T2nI"),V=i("ChtM"),H=((w=function(){function t(n){e(this,t),this.commonService=n,this.endpoint="vouchers/"}return n(t,[{key:"addVoucher",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.post(t.endpoint,e).then((function(e){n(e)}),(function(e){r(e)}))}))}},{key:"getVouchers",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.get("".concat(t.endpoint,"?fk_expense_sheetid=").concat(e)).then((function(e){n(e)}),(function(e){r(e)}))}))}},{key:"getVoucher",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.get(t.endpoint+e+"/").then((function(e){n(e)}),(function(e){r(e)}))}))}},{key:"editVoucher",value:function(e,t){var n=this;return new Promise((function(r,i){n.commonService.update(n.endpoint+e+"/",t).then((function(e){r(e)}),(function(e){i(!1)}))}))}},{key:"deleteVoucher",value:function(e){var t=this;return new Promise((function(n,r){t.commonService.delete(t.endpoint+e+"/").then((function(e){n(!0)}),(function(e){r(!1)}))}))}}]),t}()).\u0275fac=function(e){return new(e||w)(d.Zb(b.a))},w.\u0275prov=d.Ib({token:w,factory:w.\u0275fac,providedIn:"root"}),w),O=i("SYt/");function z(e,t){if(1&e&&(d.Rb(0,"option",16),d.Hc(1),d.Qb()),2&e){var n=t.$implicit;d.nc("value",n.pk_currencyid),d.zb(1),d.Jc(" ",n.code," ")}}var j,N,M=((N=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||N)},N.\u0275cmp=d.Gb({type:N,selectors:[["app-expense-sheet-form"]],inputs:{expenseSheetForm:"expenseSheetForm",currencies:"currencies"},decls:24,vars:2,consts:[[3,"formGroup"],["formGroupName","expenseSheet"],[1,"form-group"],[1,"row"],[1,"col-3"],["for","From"],["type","date","placeholder","From","formControlName","from_field","id","to",1,"form-control"],["for","to"],["type","date","placeholder","From","formControlName","to","id","to",1,"form-control"],[1,"col-2"],["for","currency"],["id","currency","formControlName","fk_currencyid",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"col-7"],["for","amount"],["type","number","placeholder","amount","formControlName","amount","id","amount",1,"form-control"],[3,"value"]],template:function(e,t){1&e&&(d.Pb(0,0),d.Rb(1,"div",1),d.Rb(2,"div",2),d.Rb(3,"div",3),d.Rb(4,"div",4),d.Rb(5,"label",5),d.Hc(6,"From"),d.Qb(),d.Nb(7,"input",6),d.Qb(),d.Rb(8,"div",4),d.Rb(9,"label",7),d.Hc(10,"To"),d.Qb(),d.Nb(11,"input",8),d.Qb(),d.Qb(),d.Rb(12,"div",3),d.Rb(13,"div",9),d.Rb(14,"div",2),d.Rb(15,"label",10),d.Hc(16,"Currency"),d.Qb(),d.Rb(17,"select",11),d.Fc(18,z,2,2,"option",12),d.Qb(),d.Qb(),d.Qb(),d.Rb(19,"div",13),d.Rb(20,"div",2),d.Rb(21,"label",14),d.Hc(22,"Amount"),d.Qb(),d.Nb(23,"input",15),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Ob()),2&e&&(d.mc("formGroup",t.expenseSheetForm),d.zb(18),d.mc("ngForOf",t.currencies))},directives:[F.k,F.e,F.f,F.a,F.j,F.d,F.q,o.k,F.m,F.l,F.s],styles:[""]}),N),q=((j=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||j)},j.\u0275cmp=d.Gb({type:j,selectors:[["app-voucher-form"]],inputs:{expenseSheetForm:"expenseSheetForm"},decls:19,vars:1,consts:[[3,"formGroup"],["formGroupName","voucher"],[1,"row"],[1,"col-3"],["for","voucher_number"],["type","text","formControlName","voucher_number","id","voucher_number","placeholder","voucher number",1,"form-control"],["for","date"],["type","date","formControlName","date","id","date","placeholder","voucher number",1,"form-control"],["for","expense_incurred"],["type","number","formControlName","expense_incurred","id","expense_incurred","placeholder","Expense Incurred",1,"form-control"],["for","amount"],["type","number","formControlName","amount","id","amount","placeholder","amount",1,"form-control"]],template:function(e,t){1&e&&(d.Pb(0,0),d.Rb(1,"div",1),d.Rb(2,"div",2),d.Rb(3,"div",3),d.Rb(4,"label",4),d.Hc(5,"Voucher Number"),d.Qb(),d.Nb(6,"input",5),d.Qb(),d.Rb(7,"div",3),d.Rb(8,"label",6),d.Hc(9,"Date"),d.Qb(),d.Nb(10,"input",7),d.Qb(),d.Rb(11,"div",3),d.Rb(12,"label",8),d.Hc(13,"Expense Incurred"),d.Qb(),d.Nb(14,"input",9),d.Qb(),d.Rb(15,"div",3),d.Rb(16,"label",10),d.Hc(17,"Amount"),d.Qb(),d.Nb(18,"input",11),d.Qb(),d.Qb(),d.Qb(),d.Ob()),2&e&&d.mc("formGroup",t.expenseSheetForm)},directives:[F.k,F.e,F.f,F.a,F.j,F.d,F.m],styles:[""]}),j);function C(e,t){if(1&e){var n=d.Sb();d.Rb(0,"tr"),d.Rb(1,"td"),d.Hc(2),d.Qb(),d.Rb(3,"td"),d.Hc(4),d.Qb(),d.Rb(5,"td"),d.Hc(6),d.Qb(),d.Rb(7,"td"),d.Hc(8),d.Qb(),d.Rb(9,"td",4),d.Rb(10,"span",5),d.cc("click",(function(){d.wc(n);var e=t.$implicit;return d.gc(2).edit(e.pk_voucherid)})),d.Nb(11,"i",6),d.Qb(),d.Rb(12,"span",7),d.cc("click",(function(){d.wc(n);var e=t.$implicit;return d.gc(2).delete(e.pk_voucherid)})),d.Nb(13,"i",8),d.Qb(),d.Qb(),d.Qb()}if(2&e){var r=t.$implicit;d.zb(2),d.Ic(r.voucher_number),d.zb(2),d.Ic(r.date),d.zb(2),d.Ic(r.expense_incurred),d.zb(2),d.Ic(r.amount)}}function D(e,t){if(1&e&&(d.Rb(0,"table",1),d.Rb(1,"thead"),d.Rb(2,"tr"),d.Rb(3,"th"),d.Hc(4,"Voucher Number"),d.Qb(),d.Rb(5,"th"),d.Hc(6,"Date"),d.Qb(),d.Rb(7,"th"),d.Hc(8,"Expense Incurred"),d.Qb(),d.Rb(9,"th"),d.Hc(10,"Amount"),d.Qb(),d.Rb(11,"th",2),d.Hc(12,"Options"),d.Qb(),d.Qb(),d.Qb(),d.Rb(13,"tbody"),d.Fc(14,C,14,4,"tr",3),d.Qb(),d.Qb()),2&e){var n=d.gc();d.zb(14),d.mc("ngForOf",n.vouchers)}}var P,G,B=((G=function(){function t(){e(this,t),this.editVoucherEvent=new d.n,this.deleteVoucherEvent=new d.n}return n(t,[{key:"edit",value:function(e){this.editVoucherEvent.emit(e)}},{key:"delete",value:function(e){this.deleteVoucherEvent.emit(e)}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||G)},G.\u0275cmp=d.Gb({type:G,selectors:[["app-voucher-list"]],inputs:{vouchers:"vouchers"},outputs:{editVoucherEvent:"editVoucherEvent",deleteVoucherEvent:"deleteVoucherEvent"},decls:1,vars:1,consts:[["class","table table-bordered table-striped",4,"ngIf"],[1,"table","table-bordered","table-striped"],["width","80",1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-right","option-data"],["title","Edit Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-lead-pencil","option-icon"],["title","Delete Item",1,"control","text-secondary",3,"click"],[1,"mdi","mdi-trash-can","option-icon"]],template:function(e,t){1&e&&d.Fc(0,D,15,1,"table",0),2&e&&d.mc("ngIf",t.vouchers)},directives:[o.l,o.k],styles:[""]}),G),J=((P=function(){function t(n,r,i,c,o,s,u){e(this,t),this.formBuilder=n,this.currencyService=r,this.expenseSheetService=i,this.voucherService=c,this.router=o,this.processService=s,this.sidebarService=u,this.expenseSheet={},this.vouchers=[]}return n(t,[{key:"navigateToExpenseSheetView",value:function(){this.router.navigate(["expense-sheet",this.expenseSheet.pk_expense_sheetid])}},{key:"addExpenseSheet",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pk_expense_sheetid){t.next=2;break}return t.abrupt("return",void this.editExpenseSheet(e));case 2:return n=Object.assign({fk_processid:this.processId},e),t.prev=3,t.next=6,this.expenseSheetService.addExpenseSheet(n);case 6:this.expenseSheet=t.sent,this.initForm(this.expenseSheet),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:case"end":return t.stop()}}),t,this,[[3,10]])})))}},{key:"editExpenseSheet",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.expenseSheetService.editExpenseSheet(e.pk_expense_sheetid,e);case 3:this.expenseSheet=t.sent,this.initForm(this.expenseSheet),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"addVoucher",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pk_voucherid){t.next=4;break}this.editVoucher(e),t.next=13;break;case 4:return t.prev=4,t.next=7,this.voucherService.addVoucher(Object.assign(Object.assign({},e),{fk_expense_sheetid:this.expenseSheet.pk_expense_sheetid}));case 7:n=t.sent,this.vouchers.push(n),this.initForm(this.expenseSheet),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(4);case 13:case"end":return t.stop()}}),t,this,[[4,11]])})))}},{key:"handleDeleteVoucher",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.vouchers.findIndex((function(t){return t.pk_voucherid===e})),t.prev=1,t.next=4,this.voucherService.deleteVoucher(e);case 4:this.vouchers.splice(n,1),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"handleEditVoucher",value:function(e){var t=this.vouchers.findIndex((function(t){return t.pk_voucherid===e})),n=this.vouchers.splice(t,1);this.initForm(this.expenseSheet,n[0]),this.editMode=!0}},{key:"editVoucher",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.voucherService.editVoucher(e.pk_voucherid,e);case 3:n=t.sent,this.editMode=!1,this.vouchers.push(n),this.initForm(this.expenseSheet),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"submit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.expenseSheetForm.value,n=t.expenseSheet,r=t.voucher,e.next=3,this.addExpenseSheet(n);case 3:this.addVoucher(r);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"initCurrencies",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.currencyService.getCurrencies();case 3:this.currencies=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"ngOnInit",value:function(){var e=this;Object(I.a)(E.a.AddExpenseSheet,this.processService).then((function(t){return e.processId=t})),this.initForm(),this.initCurrencies(),this.sidebarService.setTitle("myRequests")}},{key:"initForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expenseSheetForm=this.formBuilder.group({expenseSheet:this.formBuilder.group({pk_expense_sheetid:e.pk_expense_sheetid,fk_currencyid:[e.fk_currencyid,F.r.compose([F.r.required])],amount:[e.amount,F.r.compose([F.r.required])],from_field:[e.from_field,F.r.compose([F.r.required])],to:[e.to,F.r.compose([F.r.required])]}),voucher:this.formBuilder.group({pk_voucherid:t.pk_voucherid,fk_expense_sheetid:[this.expenseSheet.pk_expense_sheetid],voucher_number:[t.voucher_number,F.r.compose([F.r.required])],amount:[t.amount,F.r.compose([F.r.required])],date:[t.date,F.r.compose([F.r.required])],expense_incurred:[t.expense_incurred,F.r.compose([F.r.required])]})})}}]),t}()).\u0275fac=function(e){return new(e||P)(d.Mb(F.b),d.Mb(V.a),d.Mb(p),d.Mb(H),d.Mb(s.b),d.Mb(O.a),d.Mb(m.a))},P.\u0275cmp=d.Gb({type:P,selectors:[["app-add-expense-sheet"]],decls:20,vars:7,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[3,"expenseSheetForm","currencies"],[3,"expenseSheetForm"],["type","submit",1,"btn","btn-primary"],[3,"vouchers","deleteVoucherEvent","editVoucherEvent"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Rb(2,"strong"),d.Hc(3,"Expense Details"),d.Qb(),d.Qb(),d.Rb(4,"div",2),d.Rb(5,"form",3),d.cc("ngSubmit",(function(){return t.submit()})),d.Nb(6,"app-expense-sheet-form",4),d.Nb(7,"app-voucher-form",5),d.Nb(8,"br"),d.Rb(9,"button",6),d.Hc(10),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Nb(11,"br"),d.Rb(12,"div",0),d.Rb(13,"div",1),d.Rb(14,"strong"),d.Hc(15,"Vouchers"),d.Qb(),d.Rb(16,"app-voucher-list",7),d.cc("deleteVoucherEvent",(function(e){return t.handleDeleteVoucher(e)}))("editVoucherEvent",(function(e){return t.handleEditVoucher(e)})),d.Qb(),d.Qb(),d.Rb(17,"div",2),d.Rb(18,"button",8),d.cc("click",(function(){return t.navigateToExpenseSheetView()})),d.Hc(19," Submit "),d.Qb(),d.Qb(),d.Qb()),2&e&&(d.zb(5),d.mc("formGroup",t.expenseSheetForm),d.zb(1),d.mc("expenseSheetForm",t.expenseSheetForm)("currencies",t.currencies),d.zb(1),d.mc("expenseSheetForm",t.expenseSheetForm),d.zb(3),d.Jc(" ",t.editMode?"Update Voucher":"Add"," "),d.zb(6),d.mc("vouchers",t.vouchers),d.zb(2),d.mc("disabled",0===t.vouchers.length))},directives:[F.t,F.k,F.e,M,q,B],styles:[""]}),P),T=i("m4K9"),A=i("DaQG"),$=i.n(A),L=i("a9NN"),K=i("hE/2");function U(e,t){if(1&e&&(d.Rb(0,"table",3),d.Rb(1,"tbody"),d.Rb(2,"tr"),d.Rb(3,"th",4),d.Hc(4,"Requested by :"),d.Qb(),d.Rb(5,"td"),d.Hc(6),d.Qb(),d.Qb(),d.Rb(7,"tr"),d.Rb(8,"th",4),d.Hc(9,"Date:"),d.Qb(),d.Rb(10,"td"),d.Hc(11),d.Qb(),d.Qb(),d.Rb(12,"tr"),d.Rb(13,"th",4),d.Hc(14,"From:"),d.Qb(),d.Rb(15,"td"),d.Hc(16),d.Qb(),d.Qb(),d.Rb(17,"tr"),d.Rb(18,"th",4),d.Hc(19,"To:"),d.Qb(),d.Rb(20,"td"),d.Hc(21),d.Qb(),d.Qb(),d.Rb(22,"tr"),d.Rb(23,"th",4),d.Hc(24,"Amount:"),d.Qb(),d.Rb(25,"td"),d.Hc(26),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&e){var n=d.gc();d.zb(6),d.Jc(" ",n.request&&n.request.profile.user.first_name+" "+n.request.profile.user.last_name," "),d.zb(5),d.Jc(" ",n.expenseSheet.date," "),d.zb(5),d.Jc(" ",n.expenseSheet.from_field," "),d.zb(5),d.Jc(" ",n.expenseSheet.to," "),d.zb(5),d.Jc(" ",n.expenseSheet.currency.code+" "+n.expenseSheet.amount," ")}}function X(e,t){if(1&e&&(d.Rb(0,"tr"),d.Rb(1,"td"),d.Hc(2),d.Qb(),d.Rb(3,"td"),d.Hc(4),d.Qb(),d.Rb(5,"td"),d.Hc(6),d.Qb(),d.Rb(7,"td"),d.Hc(8),d.Qb(),d.Qb()),2&e){var n=t.$implicit;d.zb(2),d.Ic(n.voucher_number),d.zb(2),d.Ic(n.date),d.zb(2),d.Ic(n.expense_incurred),d.zb(2),d.Ic(n.amount)}}function Y(e,t){if(1&e&&(d.Rb(0,"table",5),d.Rb(1,"thead"),d.Rb(2,"tr"),d.Rb(3,"th"),d.Hc(4,"Voucher Number"),d.Qb(),d.Rb(5,"th"),d.Hc(6,"Date"),d.Qb(),d.Rb(7,"th"),d.Hc(8,"Expense Incurred"),d.Qb(),d.Rb(9,"th"),d.Hc(10,"Amount"),d.Qb(),d.Qb(),d.Qb(),d.Rb(11,"tbody"),d.Fc(12,X,9,4,"tr",6),d.Qb(),d.Qb()),2&e){var n=d.gc();d.zb(12),d.mc("ngForOf",n.vouchers)}}var Z,W,ee,te,ne=((W=function(){function t(n,r,i,c,o){e(this,t),this.voucherService=n,this.expenseSheetService=r,this.activatedRoute=i,this.sidebarService=c,this.requestService=o,this.downloadPDF=function(){var e=new T.jsPDF("p","pt");e.text("Expense Sheet Details",35,20),$()(e,{html:"#table"}),$()(e,{html:"#table-2"}),e.save("expense-sheet-details.pdf")},this.expenseSheetId=this.activatedRoute.snapshot.params.id}return n(t,[{key:"getRequest",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestService.getRequests("requests","fk_processid=".concat(this.expenseSheet.fk_processid,"&workflowid=").concat(this.expenseSheetId));case 3:t=e.sent,this.request=t[0],e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getExpenseSheet",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.expenseSheetService.getExpenseSheet(this.expenseSheetId);case 3:this.expenseSheet=e.sent,this.getRequest(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getVouchers",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.voucherService.getVouchers(this.expenseSheetId);case 3:this.vouchers=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"ngOnInit",value:function(){this.getExpenseSheet(),this.getVouchers(),this.sidebarService.setTitle("myRequests")}}]),t}()).\u0275fac=function(e){return new(e||W)(d.Mb(H),d.Mb(p),d.Mb(s.a),d.Mb(m.a),d.Mb(L.a))},W.\u0275cmp=d.Gb({type:W,selectors:[["app-expense-sheet"]],decls:3,vars:6,consts:[[3,"title","downloadButtonClicked","workflowid","processId"],["class","table table-borderless table-responsive","id","table",4,"ngIf"],["datatable","","class","table table-bordered table-striped","id","table-2",4,"ngIf"],["id","table",1,"table","table-borderless","table-responsive"],["scope","row"],["datatable","","id","table-2",1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(d.Rb(0,"app-view-card",0),d.Fc(1,U,27,5,"table",1),d.Fc(2,Y,13,1,"table",2),d.Qb()),2&e&&(d.mc("title","Expense Sheet Details")("downloadButtonClicked",t.downloadPDF)("workflowid",t.expenseSheetId)("processId",t.expenseSheet&&t.expenseSheet.fk_processid),d.zb(1),d.mc("ngIf",t.expenseSheet),d.zb(1),d.mc("ngIf",t.vouchers))},directives:[K.a,o.l,f.a,o.k],styles:[""]}),W),re=((Z=function(){function t(n,r,i,c,o,s,u,a){e(this,t),this.formBuilder=n,this.currencyService=r,this.expenseSheetService=i,this.voucherService=c,this.router=o,this.processService=s,this.sidebarService=u,this.activatedRoute=a,this.expenseSheet={},this.vouchers=[],this.expenseSheetId=this.activatedRoute.snapshot.params.id}return n(t,[{key:"getExpenseSheet",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.expenseSheetService.getExpenseSheet(this.expenseSheetId);case 3:this.expenseSheet=e.sent,this.vouchers=this.expenseSheet.vouchers,this.initForm(this.expenseSheet),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])})))}},{key:"navigateToExpenseSheetView",value:function(){this.router.navigate(["expense-sheet",this.expenseSheet.pk_expense_sheetid])}},{key:"addExpenseSheet",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pk_expense_sheetid){t.next=2;break}return t.abrupt("return",void this.editExpenseSheet(e));case 2:return n=Object.assign({fk_processid:this.processId},e),t.prev=3,t.next=6,this.expenseSheetService.addExpenseSheet(n);case 6:this.expenseSheet=t.sent,this.initForm(this.expenseSheet),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:case"end":return t.stop()}}),t,this,[[3,10]])})))}},{key:"editExpenseSheet",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.expenseSheetService.editExpenseSheet(e.pk_expense_sheetid,e);case 3:this.expenseSheet=t.sent,this.initForm(this.expenseSheet),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"addVoucher",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pk_voucherid){t.next=4;break}this.editVoucher(e),t.next=13;break;case 4:return t.prev=4,t.next=7,this.voucherService.addVoucher(Object.assign(Object.assign({},e),{fk_expense_sheetid:this.expenseSheet.pk_expense_sheetid}));case 7:n=t.sent,this.vouchers.push(n),this.initForm(this.expenseSheet),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(4);case 13:case"end":return t.stop()}}),t,this,[[4,11]])})))}},{key:"handleDeleteVoucher",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.vouchers.findIndex((function(t){return t.pk_voucherid===e})),t.prev=1,t.next=4,this.voucherService.deleteVoucher(e);case 4:this.vouchers.splice(n,1),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"handleEditVoucher",value:function(e){var t=this.vouchers.findIndex((function(t){return t.pk_voucherid===e})),n=this.vouchers.splice(t,1);this.initForm(this.expenseSheet,n[0]),this.editMode=!0}},{key:"editVoucher",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.voucherService.editVoucher(e.pk_voucherid,e);case 3:n=t.sent,this.editMode=!1,this.vouchers.push(n),this.initForm(this.expenseSheet),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"submit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.expenseSheetForm.value,n=t.expenseSheet,r=t.voucher,e.next=3,this.addExpenseSheet(n);case 3:r.voucher_number&&this.addVoucher(r);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"initCurrencies",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.currencyService.getCurrencies();case 3:this.currencies=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"ngOnInit",value:function(){var e=this;Object(I.a)(E.a.AddExpenseSheet,this.processService).then((function(t){return e.processId=t})),this.initForm(),this.getExpenseSheet(),this.initCurrencies(),this.sidebarService.setTitle("myRequests")}},{key:"initForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expenseSheetForm=this.formBuilder.group({expenseSheet:this.formBuilder.group({pk_expense_sheetid:e.pk_expense_sheetid,fk_currencyid:[e.fk_currencyid,F.r.compose([F.r.required])],amount:[e.amount,F.r.compose([F.r.required])],from_field:[e.from_field,F.r.compose([F.r.required])],to:[e.to,F.r.compose([F.r.required])]}),voucher:this.formBuilder.group({pk_voucherid:t.pk_voucherid,fk_expense_sheetid:[this.expenseSheet.pk_expense_sheetid],voucher_number:[t.voucher_number,F.r.compose([F.r.required])],amount:[t.amount,F.r.compose([F.r.required])],date:[t.date,F.r.compose([F.r.required])],expense_incurred:[t.expense_incurred,F.r.compose([F.r.required])]})})}}]),t}()).\u0275fac=function(e){return new(e||Z)(d.Mb(F.b),d.Mb(V.a),d.Mb(p),d.Mb(H),d.Mb(s.b),d.Mb(O.a),d.Mb(m.a),d.Mb(s.a))},Z.\u0275cmp=d.Gb({type:Z,selectors:[["app-edit-expense-sheet"]],decls:20,vars:7,consts:[[1,"card","login-card","dropdown-all","w-100"],[1,"card-header","card-header-customer"],[1,"card-body","login-card-body"],[3,"formGroup","ngSubmit"],[3,"expenseSheetForm","currencies"],[3,"expenseSheetForm"],["type","submit",1,"btn","btn-primary"],[3,"vouchers","deleteVoucherEvent","editVoucherEvent"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Rb(2,"strong"),d.Hc(3,"Expense Details"),d.Qb(),d.Qb(),d.Rb(4,"div",2),d.Rb(5,"form",3),d.cc("ngSubmit",(function(){return t.submit()})),d.Nb(6,"app-expense-sheet-form",4),d.Nb(7,"app-voucher-form",5),d.Nb(8,"br"),d.Rb(9,"button",6),d.Hc(10),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Nb(11,"br"),d.Rb(12,"div",0),d.Rb(13,"div",1),d.Rb(14,"strong"),d.Hc(15,"Vouchers"),d.Qb(),d.Rb(16,"app-voucher-list",7),d.cc("deleteVoucherEvent",(function(e){return t.handleDeleteVoucher(e)}))("editVoucherEvent",(function(e){return t.handleEditVoucher(e)})),d.Qb(),d.Qb(),d.Rb(17,"div",2),d.Rb(18,"button",8),d.cc("click",(function(){return t.navigateToExpenseSheetView()})),d.Hc(19," Submit "),d.Qb(),d.Qb(),d.Qb()),2&e&&(d.zb(5),d.mc("formGroup",t.expenseSheetForm),d.zb(1),d.mc("expenseSheetForm",t.expenseSheetForm)("currencies",t.currencies),d.zb(1),d.mc("expenseSheetForm",t.expenseSheetForm),d.zb(3),d.Jc(" ",t.editMode?"Update Voucher":t.expenseSheetForm.value.voucher.voucher_number?"Add Voucher":"Update details"," "),d.zb(6),d.mc("vouchers",t.vouchers),d.zb(2),d.mc("disabled",0===t.vouchers.length))},directives:[F.t,F.k,F.e,M,q,B],styles:[""]}),Z),ie=[{path:"",component:i("jljr").a,children:[{path:"expense-sheets",component:_},{path:"add-expense-sheet",component:J},{path:"edit-expense-sheet/:id",component:re},{path:"expense-sheet/:id",component:ne}]}],ce=((ee=function t(){e(this,t)}).\u0275mod=d.Kb({type:ee}),ee.\u0275inj=d.Jb({factory:function(e){return new(e||ee)},imports:[[s.f.forChild(ie)],s.f]}),ee),oe=i("WM+C"),se=((te=function t(){e(this,t)}).\u0275mod=d.Kb({type:te}),te.\u0275inj=d.Jb({factory:function(e){return new(e||te)},imports:[[o.b,ce,F.o,f.b,oe.a]]}),te)}}])}();